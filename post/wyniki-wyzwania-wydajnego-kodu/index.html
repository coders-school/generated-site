<!DOCTYPE html>
<html lang="pl">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Wyniki wyzwania wydajnego kodu | Coders Shool - szkoła prawdziwego C++</title>
        <meta name="Description" content="Omówienie wyników wyzwania wydajnego kodu w C++, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo."><meta property="og:title" content="Wyniki wyzwania wydajnego kodu" />
<meta property="og:description" content="Omówienie wyników wyzwania wydajnego kodu w C&#43;&#43;, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" />
<meta property="og:image" content="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/featured.png"/>
<meta property="article:published_time" content="2020-04-24T08:29:21+02:00" />
<meta property="article:modified_time" content="2020-04-29T00:32:34+02:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/featured.png"/>
<meta name="twitter:title" content="Wyniki wyzwania wydajnego kodu"/>
<meta name="twitter:description" content="Omówienie wyników wyzwania wydajnego kodu w C&#43;&#43;, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo."/>
<meta name="application-name" content="Coders School">
<meta name="apple-mobile-web-app-title" content="Coders School"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" /><link rel="prev" href="https://coders.school/post/emoji-w-kodzie/" /><link rel="next" href="https://coders.school/post/sprzedaz-kursu-online-zakonczona/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><meta name="google-site-verification" content="7awM6eOkKNNpFMKM4jPdfyNxJkjPNYgm3IqR_ML8loY" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Wyniki wyzwania wydajnego kodu",
        "inLanguage": "pl",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/coders.school\/post\/wyniki-wyzwania-wydajnego-kodu\/"
        },"image": {
                "@type": "ImageObject",
                "url": "https:\/\/coders.school\/cover.png",
                "width":  960 ,
                "height":  540 
            },"genre": "posts","keywords": "c\u002b\u002b, wyzwanie, wydajny kod, challenge, online","wordcount":  9014 ,
        "url": "https:\/\/coders.school\/post\/wyniki-wyzwania-wydajnego-kodu\/","datePublished": "2020-04-24T08:29:21+02:00","dateModified": "2020-04-29T00:32:34+02:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
                "@type": "Organization",
                "name": "Coders School",
                "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/coders.school\/logo.png",
                "width":  127 ,
                "height":  40 
                }
            },"author": {
                "@type": "Person",
                "name": "Łukasz Ziobroń"
            },"description": "Omówienie wyników wyzwania wydajnego kodu w C++, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo."
    }
    </script>
<script>
    (function(m,a,i,l,e,r){ m['MailerLiteObject']=e;function f(){
    var c={ a:arguments,q:[]};var r=this.push(c);return "number"!=typeof r?r:f.bind(c.q);}
    f.q=f.q||[];m[e]=m[e]||f.bind(f.q);m[e].q=m[e].q||f.q;r=a.createElement(i);
    var _=a.getElementsByTagName(i)[0];r.async=1;r.src=l+'?v'+(~~(new Date().getTime()/1000000));
    _.parentNode.insertBefore(r,_);})(window, document, 'script', 'https://static.mailerlite.com/js/universal.js', 'ml');
    
    var ml_account = ml('accounts', '1867098', 'a0j3g0e1f2', 'load');
</script>

</head>
    <body><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Coders Shool - szkoła prawdziwego C&#43;&#43;">Coders School</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/kurs-online/"> Kurs C&#43;&#43; online </a><a class="menu-item" href="/sprawdz-sie/"> Test C&#43;&#43; </a><a class="menu-item" href="/poradnik/"> Poradnik </a><a class="menu-item" href="/resources/"> Książki </a><a class="menu-item" href="/o-nas/"> O nas </a><a class="menu-item" href="/faq/"> FAQ </a><a class="menu-item" href="/o-nas/#kontakt"> Kontakt </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Przełącz schemat">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Coders Shool - szkoła prawdziwego C&#43;&#43;">Coders School</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/kurs-online/" title="">Kurs C&#43;&#43; online</a><a class="menu-item" href="/sprawdz-sie/" title="">Test C&#43;&#43;</a><a class="menu-item" href="/poradnik/" title="">Poradnik</a><a class="menu-item" href="/resources/" title="">Książki</a><a class="menu-item" href="/o-nas/" title="">O nas</a><a class="menu-item" href="/faq/" title="">FAQ</a><a class="menu-item" href="/o-nas/#kontakt" title="">Kontakt</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Przełącz schemat">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Spis treści</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Wyniki wyzwania wydajnego kodu</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="o-nas/#trenerzy" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Łukasz Ziobroń</a></span>&nbsp;
                    <span class="post-category">zawarty w<a href="/categories/post/">
                                <i class="far fa-folder fa-fw"></i>Post
                            </a>&nbsp;<a href="/categories/wyzwanie/">
                                <i class="far fa-folder fa-fw"></i>Wyzwanie
                            </a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i><time datetime=2020-04-24>2020-04-24</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>około 9014 słów&nbsp;
                <i class="far fa-clock fa-fw"></i>43 min&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading/normal.min.svg"
        data-sizes="auto"
        data-srcset="/post/wyniki-wyzwania-wydajnego-kodu/featured.png, /post/wyniki-wyzwania-wydajnego-kodu/featured.png 1.5x, /post/wyniki-wyzwania-wydajnego-kodu/featured.png 2x"
        data-src="/post/wyniki-wyzwania-wydajnego-kodu/featured.png"
        alt="Omówienie wyników wyzwania wydajnego kodu w C&#43;&#43;, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo."
        title="Omówienie wyników wyzwania wydajnego kodu w C&#43;&#43;, którym był konwerter liczb z rzymskich na arabskie i odwrotnie. Zobacz zwycięskie rozwiązania i przeczytaj o najczęściej popełnianych błędach lub obejrzyj to w formie wideo." /></div><div class="details toc" id="toc-static">
                <div class="details-summary toc-title">
                    <span>Spis treści</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#zadanie">Zadanie</a></li>
    <li><a href="#cel">Cel</a></li>
    <li><a href="#statystyki">Statystyki</a></li>
    <li><a href="#ciekawostka">Ciekawostka</a></li>
    <li><a href="#co-jest-szybsze---wyjątki-czy-kody-powrotu">Co jest szybsze - wyjątki czy kody powrotu?</a></li>
    <li><a href="#co-to-jest-biblioteka-nagłówkowa">Co to jest biblioteka nagłówkowa?</a>
      <ul>
        <li><a href="#kiedy-robi-się-biblioteki-nagłówkowe-a-kiedy-kompilowane">Kiedy robi się biblioteki nagłówkowe, a kiedy kompilowane?</a></li>
        <li><a href="#przykłady-bibliotek">Przykłady bibliotek</a></li>
      </ul>
    </li>
    <li><a href="#najczęściej-popełniane-błędy">Najczęściej popełniane błędy</a>
      <ul>
        <li><a href="#błędy-i-uwagi-ogólne">Błędy i uwagi ogólne</a>
          <ul>
            <li><a href="#nie-przeczytanie-polecenia">Nie przeczytanie polecenia</a></li>
            <li><a href="#błędna-implementacja">Błędna implementacja</a></li>
            <li><a href="#język-c-zamiast-c">Język C zamiast C++</a></li>
            <li><a href="#własna-interpretacja-wymagań">Własna interpretacja wymagań</a></li>
            <li><a href="#brak-odpowiednich-include">Brak odpowiednich #include</a></li>
            <li><a href="#drabinka-if-ów">Drabinka <code>if</code>-ów</a></li>
            <li><a href="#porównania-liczb-signed-i-unsigned">Porównania liczb signed i unsigned</a></li>
          </ul>
        </li>
        <li><a href="#problemy-z-biblioteką-nagłówkową">Problemy z biblioteką nagłówkową</a>
          <ul>
            <li><a href="#funkcja-main-w-pliku-nagłówkowym">Funkcja <code>main()</code> w pliku nagłówkowym</a></li>
            <li><a href="#brak-header-guarda">Brak header guarda</a></li>
            <li><a href="#rozwiązania-w-pliku-cpp">Rozwiązania w pliku cpp</a></li>
          </ul>
        </li>
        <li><a href="#obsługa-błędów">Obsługa błędów</a>
          <ul>
            <li><a href="#używanie-nieadekwatnych-wyjątków">Używanie nieadekwatnych wyjątków</a></li>
            <li><a href="#rzucanie-nie-wyjątkami">Rzucanie nie-wyjątkami</a></li>
            <li><a href="#łapanie-swoich-wyjątków-w-funkcjach-toromam-i-fromroman">Łapanie swoich wyjątków w funkcjach <code>toRomam()</code> i <code>fromRoman()</code></a></li>
            <li><a href="#obsługa-błędów-przez-wypisywanie">Obsługa błędów przez wypisywanie</a></li>
            <li><a href="#strumienie-do-obsługi-błędów---wydajność">Strumienie do obsługi błędów - wydajność</a></li>
            <li><a href="#obsługa-błędów-przez-zwracanie-magicznych-wartości">Obsługa błędów przez zwracanie magicznych wartości</a></li>
          </ul>
        </li>
        <li><a href="#optymalizacje">Optymalizacje</a>
          <ul>
            <li><a href="#konkatenacja-stdstring">Konkatenacja <code>std::string</code></a></li>
            <li><a href="#kolejność-sprawdzeń">Kolejność sprawdzeń</a></li>
            <li><a href="#przekazywanie-przez-const--w-celu-unikania-zbędnych-kopii">Przekazywanie przez <code>const &amp;</code> w celu unikania zbędnych kopii</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#etap-1-sprawdzanie-poprawności">ETAP 1: Sprawdzanie poprawności</a></li>
    <li><a href="#etap-2-mierzenie-wydajności">ETAP 2: Mierzenie wydajności</a>
      <ul>
        <li><a href="#metodologia-pomiarów">Metodologia pomiarów</a></li>
      </ul>
    </li>
    <li><a href="#wyniki">WYNIKI</a>
      <ul>
        <li><a href="#macos--apple-clang">MacOS + Apple Clang</a></li>
        <li><a href="#ubuntu-linux--g">Ubuntu Linux + g++</a></li>
      </ul>
    </li>
    <li><a href="#zwycięzcy">Zwycięzcy</a>
      <ul>
        <li><a href="#zwycięskie-rozwiązanie---99-zniżki-na-kurs-c-online">Zwycięskie rozwiązanie - 99% zniżki na kurs C++ online</a>
          <ul>
            <li><a href="#kacper-kaleta">Kacper Kaleta</a></li>
          </ul>
        </li>
        <li><a href="#wyróżnione-rozwiązania---50-zniżki-na-kurs-c-online">Wyróżnione rozwiązania - 50% zniżki na kurs C++ online</a>
          <ul>
            <li><a href="#robert-kumanek">Robert Kumanek</a></li>
            <li><a href="#bartek-kurosz">Bartek Kurosz</a></li>
            <li><a href="#aleksandra-postawka">Aleksandra Postawka</a></li>
            <li><a href="#jakub-wińczuk">Jakub Wińczuk</a></li>
            <li><a href="#marcin-komorek">Marcin Komorek</a></li>
          </ul>
        </li>
        <li><a href="#pozostali-finaliści---10-zniżki-na-kurs-c-online">Pozostali finaliści - 10% zniżki na kurs C++ online</a></li>
      </ul>
    </li>
    <li><a href="#wnioski">Wnioski</a></li>
    <li><a href="#sprzedaż-kursu-c-online">Sprzedaż kursu C++ online</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Jeśli wolisz obejrzeć wideo o wynikach wyzwania, to od 1h30m możesz obejrzeć omówienie wyników. A jeśli wolisz czytać, to scrolluj :)</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/08uqblwKqw4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="zadanie">Zadanie</h2>
<p>Implementacja konwersji z liczb arabskich na rzymskie i odwrotnie. Przeczytaj opis zadania na <a href="/wyzwanie-wydajnego-kodu" rel="">stronie wyzwania</a></p>
<h2 id="cel">Cel</h2>
<ul>
<li>Sprawdzenie programistycznej intuicji - czy uznacie, że wyjątki są odpowiednie do obsługi błędów, jeśli chodzi o wydajność.</li>
<li>Sprawdzenie czy próbujecie stosować przedwczesne optymalizacje. Przedwczesną optymalizacją jest każda, którą dokonacie przed jakiemkolwiek pomiarem czasu działania kodu.</li>
<li>Sprawdzenie, czy szybkość działania programu może iść w parze z czystym kodem.</li>
</ul>
<p>Ja, już znając wyniki mogę powiedzieć, że to wyzwanie nie spełniło do końca swoich założeń. To miało być wyzwanie wydajnego kodu, ale bardziej to było wyzwanie poprawnego kodu. Większy nacisk był na obsługę błędów, bo dużo rozwiązań, które przysłaliście nie działało poprawnie. Te rozwiązania niestety musiałem odrzucić. Zgodnie z tym co napisałem na <a href="/wyzwanie-wydajnego-kodu" rel="">stronie wyzwania</a>:</p>
<br>
<blockquote>
<p>Nagroda gwarantowana zostanie przyznana każdemu, kto przyśle poprawnie działające rozwiązanie, tzn. spełniające przynajmniej pierwsze kryterium.</p>
<ol>
<li>Poprawne działanie. Jeśli twoje funkcje nie będą zwracały prawidłowych rezultatów, to twoje rozwiązanie będzie odrzucone.</li>
</ol>
</blockquote>
<p>Przez prawidłowe rezultaty rozumiemy, że funkcje poprawnie zadziałają dla liczb od 1 do 3999, a w przypadku niepoprawnych danych wejściowych, takich jak -1, 0, &ldquo;&rdquo;, &ldquo;VIV&rdquo;, &ldquo;IXI&rdquo;, &ldquo;sth&rdquo; zgłoszą błąd albo rzucając wyjątkiem albo zwracając specjalne wartości. W przypadku funkcji <code>fromRoman()</code> liczby mniejsze od 1, a w przypadku funkcji <code>toRoman()</code> pusty string lub string zawierący napis &ldquo;error&rdquo;, &ldquo;Error&rdquo; lub &ldquo;ERROR&rdquo; czy jakiekolwiek jego odmiany, które później już dopisywałem ręcznie, gdy testy nie przechodziły. Zobaczysz poniżej listę tych stringów. Ważne żeby wartością zwracaną nie była żadna z tych, które można uzyskać w przypadku poprawnej konwersji. Niestety tych wariantów było tak dużo, że bardzo mnie to spowalniało przy sprawdzaniu.</p>
<p>Mam trzy wnioski.</p>
<ol>
<li>
<p>Zdecydowana większość osób (do 80%) nie testuje swoich rozwiązań. W związku z tym wynikają poniższe statystyki. Chyba muszę nauczyć was testowania. Może następne wyzwanie będzie wyzwaniem z testowaniem kodu? Zobaczymy.</p>
</li>
<li>
<p>To wyzwanie było za trudne. Wydawało mi się, że to taki akademicki przykład z taką kowersją. Mamy dość ograniczony zbiór wartości i tak naprawdę najwydajniejszym rozwiązaniem było zrobienie LUT (LookUp Table). Spisanie wszystkich wartości od 1 do 3999 w obu formatach i wyszukiwanie w nich. Oczywiście pisanie z palca może być czasochłonne, więc cały trik polega na tym jak wygenerować takie coś. Takie rozwiązania mają złożoność stałą. Ale to jeszcze nie ten etap. Aczkolwiek po podaniu tej podpowiedzi zastanawiałem się czy nie zrobić z niej kolejnego wyzwania&hellip; ale jednak nie. Jeszcze nie :) Może kiedyś.</p>
</li>
<li>
<p>Przedczesne optymalizacje.<br></p>
<blockquote cite="Donald Knuth">Premature optimisation is the root of all evil</blockquote>
<p>Część z was chyba za bardzo skupiła się na optymalizowaniu rozwiązań, które nie działały. Albo z powodu braku testów przestały działać i testy tego nie wykryły. <strong>Jeśli coś nie działa, to nie ważne jak szybko to nie działa</strong>. Najpierw musi działać poprawnie, aby było co optymalizować. Można wtedy taką w pełni poprawną pierwszą wersję wykorzystać jako benchmark, czyli taką implementację do odniesienia. Potem po dokonaniu zmian sprawdzamy, czy faktycznie program działa szybciej. O samym benchmarkowaniu i optymalizowaniu też można wiele powiedzieć. Lub napisać.</p>
</li>
</ol>
<h2 id="statystyki">Statystyki</h2>
<ul>
<li>Liczba zgłoszonych osób - 140</li>
<li>Liczba przysłanych rozwiązań - 40</li>
<li>Liczba rozwiązań korzystających w wyjątków - 9</li>
<li>Liczba rozwiązań korzystających z kodów powrotu - 31</li>
<li>Liczba poprawnych rozwiązań - &hellip; 8</li>
</ul>
<h2 id="ciekawostka">Ciekawostka</h2>
<p>Informację o tym wyzwaniu wrzucałem też na <a href="https://www.wykop.pl/wpis/48736977/hej-mireczki-organizuje-wyzwanie-programistyczne-w/172440973/#comment-172440973" target="_blank" rel="noopener noreffer">wykop.pl</a>. Mirek @TomaszA2 podesłał ciekawe rozwiązanie konwersji z liczb arabskich na rzymskie w stylu code-golf. Wyzwania code-golf polegają na zrealizowaniu danej funkcjonalności przy jak najmniejszej liczbie użytych znaków. Innymi słowy - im krótszy kod tym lepiej.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">rome</span><span class="p">(</span><span class="nx">N</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">o</span><span class="p">){</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">s</span><span class="o">=</span><span class="nx">b</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span><span class="nx">N</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">,</span><span class="nx">a</span><span class="o">^=</span><span class="mi">7</span><span class="p">)</span>
    <span class="k">for</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">N</span><span class="o">%</span><span class="nx">a</span><span class="p">,</span><span class="nx">N</span><span class="o">=</span><span class="nx">N</span><span class="o">/</span><span class="nx">a</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span><span class="nx">o</span><span class="o">--</span><span class="p">;)</span>
      <span class="nx">s</span><span class="o">=</span><span class="s1">&#39;IVXLCDM&#39;</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">o</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">?</span><span class="nx">b</span><span class="o">+</span><span class="nx">N</span><span class="o">-</span><span class="p">(</span><span class="nx">N</span><span class="o">&amp;=~</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="nx">s</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">s</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Rozwiązanie jest w JavaScript i pochodzi z magazynu <a href="https://pagedout.institute/download/PagedOut_001_beta1.pdf" target="_blank" rel="noopener noreffer">Paged Out #1, str. 33</a>. Spróbujcie zrozumieć ten kod bez czytania opisu algorytmu :)</p>
<h2 id="co-jest-szybsze---wyjątki-czy-kody-powrotu">Co jest szybsze - wyjątki czy kody powrotu?</h2>
<p>Wszystko wytłumaczyłem na poniższym wideo.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/quF1Jex0YL8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="co-to-jest-biblioteka-nagłówkowa">Co to jest biblioteka nagłówkowa?</h2>
<p>Spodziewałem się, że to dla początkujących może nie być do końca jasne, dlatego dalej w opisie widzieliście, że chodzi mi o implementację 2 funkcji. Ale konkretnie z punktu widzenia sposobu, jak pisze się biblioteki to mamy ich 2 rodzaje. Biblioteki nagłówkowe oraz kompilowane. Kompilowane z kolei dzielą się jeszcze na statyczne i dynamiczne, ale w punktu widzenia implementacji to nie ma między nimi żadnej różnicy. Różnica jest w sposobie linkowania się z nimi. Ale my nie o nich, bo mieliście zrobić bibliotekę nagłówkową. A biblioteka nagłówkowa, to nic innego jak treść tych funkcji wrzucona do pliku nagłówkowego, czyli hpp. Oczywiście samo rozszerzenie pliku jest umowne, niektórzy stosują hxx, niektórzy h. Ja mam konwencję, że dla C++ stosuję rozszerzenia cpp i hpp. Dla języka C z kolei c i h. Mam nadzieję, że jest to jasne. Chodziło więc o to, aby implementacja tych 2 funkcji była w pliku nagłówkowym. Jeśli ktoś wrzucił to do pliku c/cpp - przymykałem oko i sam sobie kopiowałem ją do nagłówka. Do pliku c/cpp wrzucamy implementacje, gdy robimy biblioteki kompilowane, czyli te wspomniane przeze mnie statyczne lub dynamiczne.</p>
<h3 id="kiedy-robi-się-biblioteki-nagłówkowe-a-kiedy-kompilowane">Kiedy robi się biblioteki nagłówkowe, a kiedy kompilowane?</h3>
<p>Nic nie stoi na przeszkodzie aby zawsze robić biblioteki nagłówkowe, ale mają one swoje wady. Wydłużają one na pewno czas kompilacji, powodują, że ten sam kod będzie kompilowany po kilka razy w różnych jednostkach kompilacji, a czasami może dość do naruszenia ODR, czyli One Definition Rule. Nie będę się nad tym teraz rozwodził. Plusem bibliotek nagłówkowych jest sposób ich użycia. Wystarczy dać #include „plik.hpp” i tylko zapewnić, że ten plik jest w odpowiedniej ścieżce. Jeśli nie jest, to trzeba jeszcze przy budowaniu projektu dostarczyć kompilatorowi ścieżkę do niego za pomocą flagi -I.
Jeśli chodzi o biblioteki kompilowalne, to ich minusem jest sposób użycia. Wymagają one również posiadania części nagłówkowej, czyli takiego samego pliku hpp (lub zestawu plików) jak przy bibliotece nagłówkowej. Tam jednak są tylko sygnatury funkcji. Ich implementacja jest w plikach źródłowych i taką bibliotekę trzeba najpierw skompilować, a potem się z nią zlinkować. Polska nazwa na linkowane to podobno konsolidacja, chociaż ja tutaj wolę angielskie linkowanie. A od sposobu linkowanie zależy, czy będzie ona dołączona statycznie czy dynamicznie. Musiałbym zrobić cały odcinek poświęcony bibliotekom lub kompilacji, aby o tym dokładnie opowiedzieć. Jeśli tego chcecie to dajcie mi znać, najlepiej w komentarzach. Ale myślę, że na chwilę obecną taka wiedza powinna wam wystarczyć :) Dodam tylko, że jeśli biblioteka zawiera funkcje szablonowe, to ich implementacje muszą być w plikach nagłówkowych.</p>
<h3 id="przykłady-bibliotek">Przykłady bibliotek</h3>
<p>Dam wam przykłady 2 bibliotek C++. Pierwsza z nich to <a href="https://github.com/google/googletest" target="_blank" rel="noopener noreffer">GTest</a>. Najpopularniejsza obecnie biblioteka, czy też framework do pisania testów jednostkowych. Jest to biblioteka kompilowana. Aby używać GTesta w waszych projektach musicie go ściągnąć, skompilować (lub po prostu ściągacie już skompilowaną wersję na waszą architekturę) oraz linkujecie się z nią. Kto używał, na pewno wie o co chodzi. Należy do opcji kompilacji dodać -lgtest lub w CMakeLists.txt dopisać target_link_libraries(appname gtest).
Drugi przykład to biblioteka <a href="https://github.com/catchorg/Catch2" target="_blank" rel="noopener noreffer">Catch2</a>. Jest to druga najpopularniejsza obecnie biblioteka do testowania. Ona jest przykładem biblioteki nagłówkowej. Wystarczy tylko, że ściągniecie sobie plik catch.hpp i zaincludujecie go w pliku i już w tym pliku możecie pisać testy. Nic więcej. Jeśli oglądaliście moje wideo z omówienia pierwszego wyzwania to pod jego koniec pokazywałem jak wyglądała moja praca z pisaniem testów do tego wyzwania. WIdeo wrzucam poniżej. W 35 minucie widzicie kopiowanie pliku nagłówkowego i dołączanie go do projektu.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/fpIgX9HsvhI?t=2102" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="najczęściej-popełniane-błędy">Najczęściej popełniane błędy</h2>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Jedno ważne zastrzeżenie<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Jeśli ktoś z uczestników poczuje się atakowany lub krytykowany to proszę o wybaczenie. Specjalnie nie podaję tutaj, czyich rozwiązań dotyczą dane uwagi, aby nie zarzucać niczego konkretnym osobom, tylko skomentować kod który napisały. A sposób pisania kodu zawsze ewoluuje i każdy może się poprawić. Robię więc to wszystko w dobrej wierze. A najłatwiej się nauczyć na konkretach, więc poniżej omawiam te rzeczy, które zauważyłem w waszym kodzie. Tak samo podczas kursu wybieram niektóre rozwiązania, z których później robię listę najczęściej popełnianych błędów. No to jedziemy :)</div>
        </div>
    </div>
<h3 id="błędy-i-uwagi-ogólne">Błędy i uwagi ogólne</h3>
<h4 id="nie-przeczytanie-polecenia">Nie przeczytanie polecenia</h4>
<p><a href="/wyzwanie-wydajnego-kodu" rel="">Treść zadania</a> mówiła, aby funkcje nazywały się <code>toRoman()</code> i <code>fromRoman()</code>. Biblioteki mają to do siebie, że jeśli sygnatury funkcji się nie zgadzają to nijak się jej nie zintegruje do większego systemu. To było jednym z wymagań i jego nie spełnienie powodowało odrzucenie rozwiązania. Ja nie ograniczyłem się do pełnych sygnatur, podałem jedynie nazwy funkcji oraz sposób, w jaki będę tych funkcji używał. To dawało pewną dowolność. Chciałem zobaczyć kto z was np. zastosuje taką optymalizację, aby przekazać <code>std::string</code> przez <code>const &amp;</code>. Przykład użycia funkcji również widniał na stonie wyzwania. Jeśli funkcja zamiast zwracać wartość wypisywała ją na ekran, to niestety nie spełniała wymagań.</p>
<h4 id="błędna-implementacja">Błędna implementacja</h4>
<p>Rozwiązanie miało być odporne na błędy, ale nie każdy dobrze przetestował swoje implementacje. Naliczyłem aż 19 takich, które poprawnie dekodowało niepoprawne ciągi, co nie powinno mieć miejsca. Te ciągi to np.</p>
<ul>
<li>IVI = 5 lub 7</li>
<li>IXI = 10 lub 12</li>
<li>IMI = 1000 lub 1002</li>
<li>itp.</li>
</ul>
<h4 id="język-c-zamiast-c">Język C zamiast C++</h4>
<p>Oczywiście nic nie mam do C, ale to było wyzwanie w C++. Niektórzy jawnie napisali mi, że napisali to w C, bo lepiej znają ten język. Oczywiście nie odrzucałem takich rozwiązań, dopóki kompilowały się za pomocą kompilatora do języka C++. Niektórzy być może jednak nie widzą za dużych różnic pomiędzy C a C++. I tutaj być może wstyd się przyznać, ale ja też po studiach nie wiedziałem jaka jest różnica. Co gorsza jeszcze na 5 roku studiów na kierunku informatyka pamiętam, że robiłem czat na programowaniu sieciowym i nie miałem pojęcia dlaczego kompilator mówi mi, że typ bool nie istnieje. Okazało się, że pisałem w C++, a kompilowałem kompilatorem C, na dodatek w standardzie ANSI C. Ale myślę, że to wina edukacji na studiach. Ale jak widzicie ja pomimo takich braków wiedzy jakoś zostałem programistą. Teraz niestety jest ciężej wbić się na rynek pracy. A typ bool nie jest jedyną różnicą między C i C++. Języki te mają taką samą składnię, ale głównymi różnicami są:</p>
<ul>
<li>wsparcie dla obiektowości w C++ i jej brak w C</li>
<li>używanie strumieni (np. <code>cout</code> i <code>cin</code>) jako domyślnego wejścia i wyjścia w C++, a funkcji <code>printf</code> i <code>scanf</code> w C,</li>
<li>brak pisania <code>void</code> w sygranturach funkcji, jeśli nie przyjmują parametrów w C++. W C pusta lista argumentów oznacza zupełnie dowolne argumenty, więc wpisuje się <code>void</code>, jeśli funkcja nie przyjmuje parametrów</li>
<li>używanie <code>char*</code> w C jako łańcucha znaków, a <code>std::string</code> w C++</li>
<li>i jeszcze masa innych rzeczy, ale to również temat na inny odcinek. Chcecie takiego omówienia różnic między językami? Dajcie znać w komentarzach. Jednocześnie zastrzegam, że nie jestem profesjonalnym programistą języka C i po prostu go nie znam. W szczególności nie znam dobrze nowych standardów, jak C11 i C18, ale wiem gdzie szukać informacji, gdy będą mi potrzebne :) I nie będzie to w pierwszej kolejności StackOverflow, ale cppreference.com :)</li>
</ul>
<p>Oczywiście będąc programistą C++ czasem będziecie się natykać na takie wstawki z języka C w kodzie. Czasem są one robione nieświadomie. A często też w ogłoszeniach o pracę widzicie o zgrozo C / C++. Uciekajcie od takich ofert. Ja się póki co spotkałem, że są to oferty dla języka C, ale z racji że coraz ciężej o takich programistów, to dodają tam C++, bo programista C++ będzie rozumiał C. Jest to zasadniczo prawdą, ale nie do końca. Trzeba być takim świadomym programistą C++, który dobrze zna zarządzanie zasobami, aby dobrze czuć się w C. Ja przykładowo nie chciałbym pisać w C, bo wiem jak dużo ciekawych rzeczy daje mi C++ i bez nich czuł bym się jak bez jednej ręki. Ale to tylko moja opinia i wiem, że część ludzi będzie mieć odwrotnie, bo dla nich C może być bardziej intuicyjny niż C++. Ja jednak mocno obstaje przy paradygmacie programowania obiektowego, które ciągle jest najpopularniejsze. Programowanie funkcyjne też jest fajne i kolejne standardy C++ wprowadzają coraz więcej takich elementów do języka, więc jeśli tylko jest się na bieżąco, to można być naprawdę uniwersalnym wielodogmatowym programistą C++, któremu będzie bardzo łatwo nauczyć się praktycznie dowolnego innego języka :D No może poza JavaScriptem. Bo próbowałem :P Ale zostawmy JS, okazji do hejtowania go będzie mnóstwo ;)</p>
<h4 id="własna-interpretacja-wymagań">Własna interpretacja wymagań</h4>
<p>To jest zawsze i wszędzie. Niektórzy z was zakładali, że warto obsługiwać nawet mnożniki po 1000, które zapisuje się dwoma pionowymi kreskami. W wymaganiach nic o tym nie było :) Wiem, że chcieliście dobrze, bo pewnie stwierdziliście, że im więcej obsługujecie tym lepiej. Ale ja tego nie chciałem. Pewnie spędziliście nad tym dużo czasu i to na darmo. W wymaganiach była obsługa błędów, więc jeśli np rzucaliście wyjątkiem gdy liczba była większa niż 3999 to było ok i dokładnie o to mi chodziło.
To ujawnia taką ciekawostkę naszej programistycznej natury. A może w sumie efekt edukacji szkolnej. Zamiast zapytać wolimy sami coś zrobić i przedstawić jako gotowe. Część osób pytała mnie o to. Nie chciałem wprost odpowiadać jaki jest górny limit, ale mówiłem, że taki jak maksymalna liczba rzymska. Nie chciałem z jednej strony ułatwiać zadania tym, którzy mimo wszystko napisali, ale wasze zachowanie jest godne pochwały. Jeśli wymagania nie są jasne albo widzicie kilka możliwości ich interpretacji to najlepsze co możecie zrobić to zapytać, a nie samemu wybierać dogodną dla siebie wersję. W końcu za wasze programy będą płacili wam klienci i to oni wiedzą czego chcą. Chociaż najczęściej nie wiedzą. Ale za to doskonale wiedzą, czego nie chcą :)
Żeby nie było - nie odrzucałem rozwiązań, w których można było przekonwertować liczby większe niż 3999 na system rzymski, o ile miały zrobioną jakąś obsługę błędów i nie pozwalały np na konwersję zera, którego nie ma w systemie rzymskim.</p>
<h4 id="brak-odpowiednich-include">Brak odpowiednich #include</h4>
<p>Jeśli używacie <code>std::string</code> to trzeba zrobić <code>#include &lt;string&gt;</code> w danym pliku. Jeśli program wam się kompilował, to zapewne dlatego, że w pliku cpp zrobiliście coś takiego:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;roman.hpp&#34;</span><span class="cp">
</span></code></pre></td></tr></table>
</div>
</div><p><code>&quot;roman.hpp&quot;</code> to założona przeze mnie nazwa biblioteki. Gdybyście to napisali tak jak poniżej, to program przestałby się kompilować.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&#34;roman.hpp&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></code></pre></td></tr></table>
</div>
</div><p>Dyrektywa <code>#include</code> to zwykłe tekstowe wstawienie zawartości danego pliku w to miejsce. Kolejność ma znaczenie. Nie wykluczałem rozwiązań, które miały z tym problem.</p>
<h4 id="drabinka-if-ów">Drabinka <code>if</code>-ów</h4>
<p>Zaimplementowanie rozwiązania, w którym jest dużo ifów lub switcha z case&rsquo;ami wydaje się pierwszym właściwym wyborem. Jasne, że to będzie działać. Tylko algorytm zajmie dużo miejsca. Późniejsze jego modyfikacje wymagają znalezienia odpowiedniego miejsca, gdzie należy coś wstawić. Chociaż z założenia akurat ten kod raczej nie będzie modyfikowany w przyszłości. Ale ogólnie drabinka ifów to antywzorzec. Jednym z kryteriów oceny była jak najmniejsza liczba ifów, ale ostatecznie w ogóle nie brałem go pod uwagę.</p>
<p>Ifów można się pozbyć na kilka sposobów. Jeden z nich, raczej nieadekwatny do tego zadania to <a href="https://refactoring.guru/design-patterns/strategy" target="_blank" rel="noopener noreffer">wzorzec strategii (Strategy Pattern)</a>. Ale tutaj mamy do zaimplementowania tylko 2 proste funkcje i nie było sensu bawić się w polimorfizm. Inne rozwiązanie to użycie kontenerów asocjacyjnych - <code>std::map&lt;K, V&gt;</code> lub <code>std::unordered_map&lt;K, V&gt;</code>. Można też użyć np. <code>std::vector&lt;std::pair&lt;K, V&gt;&gt;</code>. Nie rozpisuję się tutaj na ten temat, bo wystarczy, że zerkniecie na zwycięskie rozwiązania. Te posiadające LookUp Table, to właśnie te właściwe.</p>
<h4 id="porównania-liczb-signed-i-unsigned">Porównania liczb signed i unsigned</h4>
<p>Używajcie dodatkowych flag kompilacji takich jak <code>-Wall -Wextra -Wconversion -pedantic -Werror</code>. Dzięki temu kompilator nie pozwoli wam na porównywanie liczb ze znakiem i takich bez znaku. Takie porównania mogą czasami wprowadzać błędy dla odpowiednio dużych liczb, które mogą być traktowane jak liczby ujemne. Takie oto ostrzeżenie kompilatora clang świadczy o wspomnianych przeze mnie konwersjach i pojawiło się ono w większości nadesłanych rozwiązań.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">comparison of integers of different signs: &#39;int&#39; and &#39;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::size_type&#39; (aka &#39;unsigned long&#39;)
      [-Wsign-compare]
</code></pre></td></tr></table>
</div>
</div><h3 id="problemy-z-biblioteką-nagłówkową">Problemy z biblioteką nagłówkową</h3>
<h4 id="funkcja-main-w-pliku-nagłówkowym">Funkcja <code>main()</code> w pliku nagłówkowym</h4>
<p>Biblioteka tym różni się od binarki (lub aplikacji), że nie ma funkcji <code>main()</code>. Biblioteka dostarcza szereg funkcji, które można używać w innych aplikacjach lub innych bibliotekach. Jeśli biblioteka ma funkcję <code>main()</code> to nie jest biblioteką, tylko binarką, którą można uruchomić.</p>
<h4 id="brak-header-guarda">Brak header guarda</h4>
<p>Strażnik nagłówka (header guard) przybiera 2 postaci:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#pragma once
</span><span class="cp"></span><span class="c1">// ...
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef NAZWA
</span><span class="cp">#define NAZWA
</span><span class="cp"></span><span class="c1">// ...
</span><span class="c1"></span><span class="cp">#endif </span><span class="c1">// NAZWA
</span></code></pre></td></tr></table>
</div>
</div><p>Preferujemy <code>#pragma once</code>. Wszystkie nowoczesne kompilatory ją obsługują. I jest mniej pisania. Jego brak w plikach nagłówkowych jest błędem. Kod może się kompilować u Ciebie pomimo jego braku, gdy masz tylko jeden <code>#include</code> związany w tym plikiem. Nie wykluczałem rozwiązań nie posiadających strażnika nagłówka.</p>
<h4 id="rozwiązania-w-pliku-cpp">Rozwiązania w pliku cpp</h4>
<p>Było kilka rozwiązań, w których implementacja znalazła się w plikach cpp, a pliki hpp zawierały jedynie sygnatury funkcji. Nie odrzucałem takich rozwiązań, po prostu skopiowałem implementacje do plików nagłówkowych.</p>
<h3 id="obsługa-błędów">Obsługa błędów</h3>
<h4 id="używanie-nieadekwatnych-wyjątków">Używanie nieadekwatnych wyjątków</h4>
<p>To tylko drobna uwaga. Może się wydawać, że typ wyjątku, który wybierzemy nie ma za dużego znaczenia, ale warto przykładać do niego wagę. Używanie <code>std::overflow_error</code> gdy podamy za małą wartość nie będzie właściwe. Można oczywiście użyć ogólnych wyjątków, takich jak <code>std::runtime_error</code>, ale najlepszym rozwiązaniem jest napisanie własnych, odpowiednio nazwanych wyjątków, które dziedziczą po najbliższej mu klasie z wyjątków standardowych. Wtedy chcąc obsłużyć błędy z tej biblioteki możemy łapać te konkretne wyjątki bez potykania się o taki problem, że przechwycimy jakiś wyjątek, którego nie powinniśmy przechwycić w danym miejscu. Dobre praktyki odnośnie wyjątków&hellip; ehh. Temat na kolejny odcinek. Chyba już 3 jeśli dobrze liczę.</p>
<h4 id="rzucanie-nie-wyjątkami">Rzucanie nie-wyjątkami</h4>
<ul>
<li><code>throw -1</code></li>
<li><code>throw 'e'</code></li>
</ul>
<p>Złe praktyki. Co prawda rzucać można wszystkim, ale mało kto się spodziewa, że musi w <code>catch</code> złapać <code>int</code>. Przyjmuje się, że <code>catch (std::exception &amp;)</code> jest takim uniwersalnym catch, łąpiącym każdy możliwy wyjątek. <code>int</code> się tam nie złapie. Istnieje jeszcze oczywiście <code>catch (...)</code>, ale to nie jest zbyt dobrą praktyka, jeśli się nie wie co się robi. Istotą wyjątków jest to, że to właśnie one są stworzone do rzucania nimi, bo dają jednolity interfejs, np. funkcję <code>what()</code>, która daje opis zdarzenia. Każdy wyjątek powinien dziedziczyć po <code>std::exception</code>. Bezpośrednio lub pośrednio poprzez inne klasy, które dostarcza nam biblioteka standardowa w nagłówku <code>&lt;stdexcept&gt;</code></p>
<h4 id="łapanie-swoich-wyjątków-w-funkcjach-toromam-i-fromroman">Łapanie swoich wyjątków w funkcjach <code>toRomam()</code> i <code>fromRoman()</code></h4>
<p>Podciągam to pod powyższy temat. Obsługa błędów przez wyjątki wymaga przemyślenia miejsc w których będą one łapane. Jeśli używaliście wyjątków do zaznaczenia, że użytkownik robi coś niepoprawnego, jak np. próbuje skonwertować liczbę ujemną, to rzucenie wyjątku jest ok. Ale natychmiastowe złapanie go i zwrócenie błędu jako <code>string</code> czy <code>int</code> przez return już nie. Poniższy kod, pomimo tego, że używa wyjątków, to zwraca kody błędów.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">arabic_num</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">arabic_num</span> <span class="o">&lt;</span> <span class="mi">4000</span><span class="p">))</span> <span class="k">throw</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(...)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Range numer has to be 1-3999&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="s">&#34;ERORR&#34;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Wyjątek powinien wylecieć poza funkcję. Należy on do interfejsu tej funkcji i osoba używająca tej funkcji powinna sama go obsłużyć. Wyjątki robi się po to, aby uprościć interfejsy. Jeśli mamy pewność, że <code>string</code> zwracany przez funkcję <code>toRoman()</code> zawsze będzie poprawną liczbą rzymską, to nie trzeba potem pisać dodatkowej logiki, która go sprawdzi. Wyjątków nie podciągamy pod taką logikę, bo może ona być zrobiona w zupełnie innym miejscu. Po prostu gwarantujecie, że będzie poprawny jeśli funkcja nie rzuci wyjątku. A jeśli rzuci, to użytkownik tej biblioteki na pewno się o tym dowie. No chyba że ignoruje wyjątki w taki sposób:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">catch</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="c1">// do nothing :)
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="obsługa-błędów-przez-wypisywanie">Obsługa błędów przez wypisywanie</h4>
<p>Mamy dedykowany strumień <code>std::cerr</code>, który jest standardowym wyjściem błędów i możemy go użyć w celu wypisywania błędów. Problem z nim będzie jednak taki, że po zakończeniu programu możemy stracić te informacje, jeśli sesja terminala zostanie zakończona. Zazwyczaj też nie chcemy, aby klientowi wyświetlił się jakiś błąd poczas konwersji i pójść dalej nie dając mu możliwości zareagowania na ten błąd. Jeśli używasz <code>std::cout</code> do wypisywania błędów to może być jeszcze gorzej, bo czasem po prostu przekierowuje się standardowe wyjście programu do <code>/dev/null</code>, aby nic nie wypisywał. Użycie <code>std::cerr</code> w obsłudze wyjątków w bloku <code>catch</code> w celu ich wypisania jest ok. Ale użycie <code>std::cerr</code> tak po prostu w algorytmnie jest mniej ok, bo łatwiej zignorować taki błąd. Nie można zignorować nieobsłużonego wyjątku, bo to ubija nasz program i użytkownik (czyli programista, który używa naszej biblioteki) od razu to zauważy.</p>
<h4 id="strumienie-do-obsługi-błędów---wydajność">Strumienie do obsługi błędów - wydajność</h4>
<p>Strumienie słyną z tego, że są wolne. Andrei Alexandrescu, autorytet i pisarz książek o C++ powiedział:<br></p>
<blockquote cite="Andrei Alexandrescu">Jeśli chcesz stracic swój ekspercki autorytet, to użyj słów 'strumienie' i 'wydajność' w jednym zdaniu.</blockquote>
<p>To parafraza jego angielskich słów. Wypisywanie błędów na ekran było w tym przypadku niepotrzebne, bo cholernie spowalniało wasze programy. Widać to na wynikach. Dla testu <code>toAndFromRomanWholeSet</code> chyba bez problemu wskażecie, które 2 rozwiązania wypisywały coś na ekran :)</p>
<table>
<thead>
<tr>
<th>benchmark</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>toAndFromRomanWholeSet_mean</td>
<td>536 945 ns</td>
<td>76 623 753 ns</td>
<td>586 206 ns</td>
<td>983 589 ns</td>
<td>4 110 901 ns</td>
<td>5 082 754 ns</td>
<td>125 607 624 ns</td>
<td>182 572 943 ns</td>
</tr>
</tbody>
</table>
<h4 id="obsługa-błędów-przez-zwracanie-magicznych-wartości">Obsługa błędów przez zwracanie magicznych wartości</h4>
<p>Jest to jeden ze sposobów na obsługę błędów. Jeśli błędy są sklasyfikowane i odpowiednio nazwane w postaci stałych lub enumów, tak jak poniżej, to super. Ale nie widziałem wielu takich rozwiązań. Gołe numery w kodzie to po prostu &ldquo;magiczne wartości&rdquo;.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">enum</span> <span class="k">class</span> <span class="nc">Error</span> <span class="p">{</span>
  <span class="n">InvalidInput</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
  <span class="n">TooBigNumber</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>
  <span class="n">NegativeNumber</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Obsługa błędów przez zwracanie specjalnych wartości ma znacznie też więcej wad niż zalet.</p>
<ul>
<li>Zwracana specjalna wartość jest poprawną wartością swojego typu. Jeśli zwrócisz <code>-1</code> to można go używać do dalszych obliczeń, a to może powodować dalsze błędy, które co gorsza mogą pozostać długo niewykryte.</li>
<li>Jak zwrócić wartość z konstruktora lub operatorów, które mają ściśle zdefiniowane sygnatury?</li>
<li>Jak przekazać różne kody błędów? Zwracać różne magiczne wartości czy użyć <code>errno</code> znanego z C?</li>
<li>Magiczne wartości muszą być opisane w dokumentacji funkcji i najlepiej także, aby były zdefiniowane jako odpowiednie stałe lub enumy. Wtedy można mówić o tzw. return codes, kodach powrotu funkcji.</li>
</ul>
<p>Ogólnie to kody powrotu funkcji wraz z <code>errno</code> to obsługa błędów w stylu języka C. W C++ preferowane są wyjątki. A jak się mają one do wydajności? Ano&hellip; <a href="#co-jest-szybsze---wyj%c4%85tki-czy-kody-powrotu" rel="">wyjątki przyspieszają programy</a>, jak już mówiłem.</p>
<h3 id="optymalizacje">Optymalizacje</h3>
<p>Ponieważ jest to wyzwanie wydajnego kodu, to powinniśmy optymalizować szybkość działania naszego kodu. Jeśli ktoś jest doświadczony to zaraz powie, że &ldquo;hej, przecież optymalizuje się pod konkretne przypadki&rdquo;. Oczywiście. A w przypadku tak prostych konwerterów nie ma zbyt wielu przypadków użycia. Możemy wstępnie rozróżnić dwa - konwersja poprawnej liczby lub konwersja niepoprawnej liczby. Oczywiście optymalizujemy przypadek konwersji poprawnej liczby. Nie zakładamy, że ktoś będzie tej biblioteki używał głównie w taki sposób, aby wykrywała liczby, które się nie konwertują. Do tego wolelibyśmy mieć całkiem inny zestaw funkcji.</p>
<h4 id="konkatenacja-stdstring">Konkatenacja <code>std::string</code></h4>
<p><code>operator+</code> na std::string nie jest demonem szybkości. Jeśli więc używaliście go do łączenia stringów, to wydajność programu mogła na tym ucierpieć. Pytanie dlaczego to nie jest szybkie? Odeślę was do <a href="https://stackoverflow.com/questions/611263/efficient-string-concatenation-in-c" target="_blank" rel="noopener noreffer">StackOverflow</a>. Tutaj tylko wspomnę, że lepiej używać <code>operator+=</code>. O stringach i dobrych praktykach z nimi związanymi też można dużo powiedzieć. Czwarty temat na nowy odcinek.</p>
<h4 id="kolejność-sprawdzeń">Kolejność sprawdzeń</h4>
<p>Jeśli w <code>if</code> jest kilka warunków i są one połączone operatorem <code>||</code> to warto zadbać, aby jako pierwszy wystąpił warunek, który będzie częściej spełniony. Dzięki temu drugi warunek nie będzie w ogóle sprawdzony.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">if</span> <span class="p">(</span><span class="n">oftenTrue</span> <span class="o">||</span> <span class="n">rarelyTrue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... *. }
</span></code></pre></td></tr></table>
</div>
</div><p>Jest lepsze niż</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">if</span> <span class="p">(</span><span class="n">rarelyTrue</span> <span class="o">||</span> <span class="n">oftenTrue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Taka optymalizacja wynika z zasad logiki. Aby cały warunek, który składa się z 2 lub więcej podwarunków połączonych instrukcją or był prawdziwy, wystarczy że tylko jeden podwarunek będzie prawdziwy. Standard języka C++ definiuje, że takie sprawdzania zawsze odbywają się od lewej do prawej. Oczywiście trzeba trochę wiedzieć jakie są możliwe scenariusze i znać prawdopodobieństwo z jakim dane warunki są prawdziwe. Nie zawsze jest to możliwe, ale warto wtedy dokonać pomiarów, na konkretnych scenariuszach, aby się tego dowiedzieć.</p>
<h4 id="przekazywanie-przez-const--w-celu-unikania-zbędnych-kopii">Przekazywanie przez <code>const &amp;</code> w celu unikania zbędnych kopii</h4>
<p>Zawsze powinniśmy z automatu przekazywać obiekty przez <code>const &amp;</code>, z wyjątkiem typów prostych:</p>
<ul>
<li>całkowitoliczbowych (<code>int</code> i rodzina)</li>
<li>zmiennoprzecinkowych (<code>float</code> i rodzina)</li>
<li>znakowych (<code>char</code> i rodzina)</li>
</ul>
<p>Te typy mają mały rozmiar, zazwyczaj do 8 bajtów, czyli tyle ile rozmiar wskaźnika w architekturze x64. Przekazanie ich przez kopię będzie równie wydajne.</p>
<p>Wszystkie inne typy, w szczególności <code>std::string</code> czy kontenery warto przekazywać przez <code>const &amp;</code>.</p>
<p>Jest jeszcze coś takiego <code>std::string_view</code> lub <code>std::span</code> w C++20, które stanowią widoki na zakresy danych. Używa się ich, aby przekazać dane bez ich kopiowanie i ich stosowanie również jest szybkie.</p>
<h2 id="etap-1-sprawdzanie-poprawności">ETAP 1: Sprawdzanie poprawności</h2>
<p>Do sprawdzenia poprawności napisałem poniższe testy we frameworku Catch.</p>
<ul>
<li>Input: 40 rozwiązań</li>
<li>Output: 8 poprawnych rozwiązań</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#define CATCH_CONFIG_MAIN
</span><span class="cp">#include</span> <span class="cpf">&#34;catch.hpp&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp"></span><span class="c1">// include your header file here
</span><span class="c1"></span>
<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">minRoman</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Proper Roman values&#34;</span><span class="p">,</span> <span class="s">&#34;[toRoman]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;A generated number and expected roman output&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">pair</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;I&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#34;II&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#34;III&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#34;IV&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#34;V&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#34;VI&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s">&#34;VII&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s">&#34;VIII&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#34;IX&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s">&#34;X&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="s">&#34;CXC&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#34;CCC&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">649</span><span class="p">,</span> <span class="s">&#34;DCXLIX&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="s">&#34;CM&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">950</span><span class="p">,</span> <span class="s">&#34;CML&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="s">&#34;M&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1050</span><span class="p">,</span> <span class="s">&#34;ML&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="s">&#34;MC&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1410</span><span class="p">,</span> <span class="s">&#34;MCDX&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="s">&#34;MD&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">1900</span><span class="p">,</span> <span class="s">&#34;MCM&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="s">&#34;MMM&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">3888</span><span class="p">,</span> <span class="s">&#34;MMMDCCCLXXXVIII&#34;</span><span class="p">),</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">3999</span><span class="p">,</span> <span class="s">&#34;MMMCMXCIX&#34;</span><span class="p">));</span>

        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;toRoman is called for &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">toRoman</span><span class="p">(</span><span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="p">);</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;The result is a corresponding Roman number &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CHECK</span><span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Conversion to Roman and to Arabic&#34;</span><span class="p">,</span> <span class="s">&#34;[toRoman][fromRoman]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;All numbers from range 1 to 3999&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">number</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3999</span><span class="p">));</span>

        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;toRoman and fromRoman are called for &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">number</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fromRoman</span><span class="p">(</span><span class="n">toRoman</span><span class="p">(</span><span class="n">number</span><span class="p">));</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;result is equal to number&#34;</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CHECK</span><span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">number</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Exceptions - incorrect Roman values&#34;</span><span class="p">,</span> <span class="s">&#34;[fromRoman][exceptions][!mayfail]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;Incorrect value&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">value</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="s">&#34;incorrect&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
                              <span class="s">&#34;IL&#34;</span><span class="p">,</span> <span class="s">&#34;IC&#34;</span><span class="p">,</span> <span class="s">&#34;ID&#34;</span><span class="p">,</span> <span class="s">&#34;IM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;VX&#34;</span><span class="p">,</span> <span class="s">&#34;VC&#34;</span><span class="p">,</span> <span class="s">&#34;VD&#34;</span><span class="p">,</span> <span class="s">&#34;VM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;XD&#34;</span><span class="p">,</span> <span class="s">&#34;XM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;LD&#34;</span><span class="p">,</span> <span class="s">&#34;LM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;IIII&#34;</span><span class="p">,</span> <span class="s">&#34;XXXX&#34;</span><span class="p">,</span> <span class="s">&#34;CCCC&#34;</span><span class="p">,</span> <span class="c1">// &#34;MMMM&#34; intentionally commented out - it could be allowed in some solutions
</span><span class="c1"></span>                              <span class="s">&#34;VV&#34;</span><span class="p">,</span> <span class="s">&#34;LL&#34;</span><span class="p">,</span> <span class="s">&#34;DD&#34;</span><span class="p">,</span>
                              <span class="s">&#34;MIM&#34;</span><span class="p">,</span> <span class="s">&#34;MVM&#34;</span><span class="p">,</span> <span class="s">&#34;MXM&#34;</span><span class="p">,</span> <span class="s">&#34;MLM&#34;</span><span class="p">,</span>        <span class="s">&#34;MDM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;DID&#34;</span><span class="p">,</span> <span class="s">&#34;DVD&#34;</span><span class="p">,</span> <span class="s">&#34;DXD&#34;</span><span class="p">,</span> <span class="s">&#34;DLD&#34;</span><span class="p">,</span> <span class="s">&#34;DCD&#34;</span><span class="p">,</span> <span class="s">&#34;DDD&#34;</span><span class="p">,</span> <span class="s">&#34;DMD&#34;</span><span class="p">,</span>
                              <span class="s">&#34;CIC&#34;</span><span class="p">,</span> <span class="s">&#34;CVC&#34;</span><span class="p">,</span>        <span class="s">&#34;CLC&#34;</span><span class="p">,</span>        <span class="s">&#34;CDC&#34;</span><span class="p">,</span> <span class="s">&#34;CMC&#34;</span><span class="p">,</span>
                              <span class="s">&#34;LIL&#34;</span><span class="p">,</span> <span class="s">&#34;LVL&#34;</span><span class="p">,</span> <span class="s">&#34;LXL&#34;</span><span class="p">,</span> <span class="s">&#34;LLL&#34;</span><span class="p">,</span> <span class="s">&#34;LCL&#34;</span><span class="p">,</span> <span class="s">&#34;LDL&#34;</span><span class="p">,</span> <span class="s">&#34;LML&#34;</span><span class="p">,</span>
                                     <span class="s">&#34;XVX&#34;</span><span class="p">,</span>        <span class="s">&#34;XLX&#34;</span><span class="p">,</span> <span class="s">&#34;XCX&#34;</span><span class="p">,</span> <span class="s">&#34;XDX&#34;</span><span class="p">,</span> <span class="s">&#34;XMX&#34;</span><span class="p">,</span>
                              <span class="s">&#34;VIV&#34;</span><span class="p">,</span> <span class="s">&#34;VVV&#34;</span><span class="p">,</span> <span class="s">&#34;VXV&#34;</span><span class="p">,</span> <span class="s">&#34;VLV&#34;</span><span class="p">,</span> <span class="s">&#34;VCV&#34;</span><span class="p">,</span> <span class="s">&#34;VDV&#34;</span><span class="p">,</span> <span class="s">&#34;VMV&#34;</span><span class="p">,</span>
                                     <span class="s">&#34;IVI&#34;</span><span class="p">,</span> <span class="s">&#34;IXI&#34;</span><span class="p">,</span> <span class="s">&#34;ILI&#34;</span><span class="p">,</span> <span class="s">&#34;ICI&#34;</span><span class="p">,</span> <span class="s">&#34;IDI&#34;</span><span class="p">,</span> <span class="s">&#34;IMI&#34;</span>
                              <span class="p">);</span>   <span class="c1">// and some more
</span><span class="c1"></span>
        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;fromRoman is called - exception version for &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;Exception is thrown&#34;</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CHECK_THROWS</span><span class="p">(</span><span class="n">fromRoman</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Exceptions - numbers out of range&#34;</span><span class="p">,</span> <span class="s">&#34;[toRoman][exceptions][!mayfail]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;An inproper number to convert&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">number</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">100000000</span><span class="p">);</span>

        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;toRoman is called - exception version for &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">number</span><span class="p">)</span> <span class="p">{</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;Exception is thrown&#34;</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CHECK_THROWS</span><span class="p">(</span><span class="n">toRoman</span><span class="p">(</span><span class="n">number</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Return codes - incorrect Roman values&#34;</span><span class="p">,</span> <span class="s">&#34;[fromRoman][retcodes][!mayfail]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;Incorrect value&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">value</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="s">&#34;incorrect&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
                              <span class="s">&#34;IL&#34;</span><span class="p">,</span> <span class="s">&#34;IC&#34;</span><span class="p">,</span> <span class="s">&#34;ID&#34;</span><span class="p">,</span> <span class="s">&#34;IM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;VX&#34;</span><span class="p">,</span> <span class="s">&#34;VC&#34;</span><span class="p">,</span> <span class="s">&#34;VD&#34;</span><span class="p">,</span> <span class="s">&#34;VM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;XD&#34;</span><span class="p">,</span> <span class="s">&#34;XM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;LD&#34;</span><span class="p">,</span> <span class="s">&#34;LM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;IIII&#34;</span><span class="p">,</span> <span class="s">&#34;XXXX&#34;</span><span class="p">,</span> <span class="s">&#34;CCCC&#34;</span><span class="p">,</span> <span class="c1">// &#34;MMMM&#34; intentionally commented out - it could be allowed in some solutions
</span><span class="c1"></span>                              <span class="s">&#34;VV&#34;</span><span class="p">,</span> <span class="s">&#34;LL&#34;</span><span class="p">,</span> <span class="s">&#34;DD&#34;</span><span class="p">,</span>
                              <span class="s">&#34;MIM&#34;</span><span class="p">,</span> <span class="s">&#34;MVM&#34;</span><span class="p">,</span> <span class="s">&#34;MXM&#34;</span><span class="p">,</span> <span class="s">&#34;MLM&#34;</span><span class="p">,</span>        <span class="s">&#34;MDM&#34;</span><span class="p">,</span>
                              <span class="s">&#34;DID&#34;</span><span class="p">,</span> <span class="s">&#34;DVD&#34;</span><span class="p">,</span> <span class="s">&#34;DXD&#34;</span><span class="p">,</span> <span class="s">&#34;DLD&#34;</span><span class="p">,</span> <span class="s">&#34;DCD&#34;</span><span class="p">,</span> <span class="s">&#34;DDD&#34;</span><span class="p">,</span> <span class="s">&#34;DMD&#34;</span><span class="p">,</span>
                              <span class="s">&#34;CIC&#34;</span><span class="p">,</span> <span class="s">&#34;CVC&#34;</span><span class="p">,</span>        <span class="s">&#34;CLC&#34;</span><span class="p">,</span>        <span class="s">&#34;CDC&#34;</span><span class="p">,</span> <span class="s">&#34;CMC&#34;</span><span class="p">,</span>
                              <span class="s">&#34;LIL&#34;</span><span class="p">,</span> <span class="s">&#34;LVL&#34;</span><span class="p">,</span> <span class="s">&#34;LXL&#34;</span><span class="p">,</span> <span class="s">&#34;LLL&#34;</span><span class="p">,</span> <span class="s">&#34;LCL&#34;</span><span class="p">,</span> <span class="s">&#34;LDL&#34;</span><span class="p">,</span> <span class="s">&#34;LML&#34;</span><span class="p">,</span>
                                     <span class="s">&#34;XVX&#34;</span><span class="p">,</span>        <span class="s">&#34;XLX&#34;</span><span class="p">,</span> <span class="s">&#34;XCX&#34;</span><span class="p">,</span> <span class="s">&#34;XDX&#34;</span><span class="p">,</span> <span class="s">&#34;XMX&#34;</span><span class="p">,</span>
                              <span class="s">&#34;VIV&#34;</span><span class="p">,</span> <span class="s">&#34;VVV&#34;</span><span class="p">,</span> <span class="s">&#34;VXV&#34;</span><span class="p">,</span> <span class="s">&#34;VLV&#34;</span><span class="p">,</span> <span class="s">&#34;VCV&#34;</span><span class="p">,</span> <span class="s">&#34;VDV&#34;</span><span class="p">,</span> <span class="s">&#34;VMV&#34;</span><span class="p">,</span>
                                     <span class="s">&#34;IVI&#34;</span><span class="p">,</span> <span class="s">&#34;IXI&#34;</span><span class="p">,</span> <span class="s">&#34;ILI&#34;</span><span class="p">,</span> <span class="s">&#34;ICI&#34;</span><span class="p">,</span> <span class="s">&#34;IDI&#34;</span><span class="p">,</span> <span class="s">&#34;IMI&#34;</span>
                              <span class="p">);</span>   <span class="c1">// and some more
</span><span class="c1"></span>
        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;fromRoman is called - return code version for &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fromRoman</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;Error code is not in a proper Roman range&#34;</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CHECK</span><span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="n">minRoman</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">SCENARIO</span><span class="p">(</span><span class="s">&#34;Return codes - numbers out of range&#34;</span><span class="p">,</span> <span class="s">&#34;[toRoman][retcodes][!mayfail]&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GIVEN</span><span class="p">(</span><span class="s">&#34;A few inproper numbers to convert&#34;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">number</span> <span class="o">=</span> <span class="n">GENERATE</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">100000000</span><span class="p">);</span>

        <span class="n">WHEN</span><span class="p">(</span><span class="s">&#34;toRoman is called - return code version&#34;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">toRoman</span><span class="p">(</span><span class="n">number</span><span class="p">);</span>

            <span class="n">THEN</span><span class="p">(</span><span class="s">&#34;Returned value is an empty string or containes [eE]rror&#34;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">using</span> <span class="k">namespace</span> <span class="n">Catch</span><span class="p">;</span>
                <span class="n">CHECK_THAT</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;error&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;Error&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;ERROR&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;ERORR&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;Range&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;range&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;blad&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;large&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;non-positive&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;Incorrect&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Contains</span><span class="p">(</span><span class="s">&#34;0&#34;</span><span class="p">)</span> <span class="o">||</span>
                                   <span class="n">Equals</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Na końcu można zauważyć, że dodawałem coraz więcej ciekawych napisów świadczących o błędach :) Tutaj widać problem z używaniem kodów powrotu. Trzeba się konkretnie umówić na jakieś wartości i je sprawdzać. Wyjątki znacznie łatwiej przetestować. Też oczywiście trzeba się zadeklarować jakiego typu to będzie wyjątek, ale można go w ogólności podpiąć pod jakiś inny w hierachi dziedziczenia i można go z łatwością przechwycić.
Do etapu 2 zakwalifikowało się 8 rozwiązań.</p>
<h2 id="etap-2-mierzenie-wydajności">ETAP 2: Mierzenie wydajności</h2>
<p>Napisałem 5 scenariuszy testowych z wykorzystaniem <a href="https://github.com/google/benchmark" target="_blank" rel="noopener noreffer">Google Benchmark</a>.</p>
<ul>
<li>toRomanSingleNumber - konwersja 42 na liczbę rzymską</li>
<li>fromRomanSingleNumber - konwersja XLII na liczbę arabską</li>
<li>toAndFromRomanWholeSet - konwersja każdej liczby od 1 do 3999 na rzymską i z powrotem. Najważniejszy benchmark.</li>
<li>toRomanInproperValuesSet - konwersja 6 niepoprawnych liczb arabskich na rzymskie</li>
<li>fromRomanInproperValuesSet - konwersja 62 niepoprawnych liczb rzymskich na arabskie</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;benchmark/benchmark.h&gt;</span><span class="cp">
</span><span class="cp"></span><span class="c1">// your include goes here
</span><span class="c1"></span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">toRomanSingleNumber</span><span class="p">(</span><span class="n">benchmark</span><span class="o">::</span><span class="n">State</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">_</span> <span class="p">:</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">toRoman</span><span class="p">(</span><span class="n">number</span><span class="p">);</span>
        <span class="n">benchmark</span><span class="o">::</span><span class="n">DoNotOptimize</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">BENCHMARK</span><span class="p">(</span><span class="n">toRomanSingleNumber</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">fromRomanSingleNumber</span><span class="p">(</span><span class="n">benchmark</span><span class="o">::</span><span class="n">State</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">roman</span> <span class="o">=</span> <span class="s">&#34;XLII&#34;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">_</span> <span class="p">:</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fromRoman</span><span class="p">(</span><span class="n">roman</span><span class="p">);</span>
        <span class="n">benchmark</span><span class="o">::</span><span class="n">DoNotOptimize</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">BENCHMARK</span><span class="p">(</span><span class="n">fromRomanSingleNumber</span><span class="p">);</span>

<span class="c1">// main benchmark function
</span><span class="c1"></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">toAndFromRomanWholeSet</span><span class="p">(</span><span class="n">benchmark</span><span class="o">::</span><span class="n">State</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">_</span> <span class="p">:</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fromRoman</span><span class="p">(</span><span class="n">toRoman</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
            <span class="n">benchmark</span><span class="o">::</span><span class="n">DoNotOptimize</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">BENCHMARK</span><span class="p">(</span><span class="n">toAndFromRomanWholeSet</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">toRomanInproperValuesSet</span><span class="p">(</span><span class="n">benchmark</span><span class="o">::</span><span class="n">State</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">6</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">12345</span><span class="p">,</span> <span class="mi">100000000</span><span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">_</span> <span class="p">:</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">value</span> <span class="p">:</span> <span class="n">values</span><span class="p">)</span> <span class="k">try</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">toRoman</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
            <span class="n">benchmark</span><span class="o">::</span><span class="n">DoNotOptimize</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(...)</span> <span class="p">{</span>
            <span class="c1">// silently ignore
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">BENCHMARK</span><span class="p">(</span><span class="n">toRomanInproperValuesSet</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">fromRomanInproperValuesSet</span><span class="p">(</span><span class="n">benchmark</span><span class="o">::</span><span class="n">State</span> <span class="o">&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="mi">62</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#34;incorrect&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
        <span class="s">&#34;IL&#34;</span><span class="p">,</span> <span class="s">&#34;IC&#34;</span><span class="p">,</span> <span class="s">&#34;ID&#34;</span><span class="p">,</span> <span class="s">&#34;IM&#34;</span><span class="p">,</span> <span class="s">&#34;VX&#34;</span><span class="p">,</span> <span class="s">&#34;VC&#34;</span><span class="p">,</span> <span class="s">&#34;VD&#34;</span><span class="p">,</span> <span class="s">&#34;VM&#34;</span><span class="p">,</span>
        <span class="s">&#34;XD&#34;</span><span class="p">,</span> <span class="s">&#34;XM&#34;</span><span class="p">,</span> <span class="s">&#34;LD&#34;</span><span class="p">,</span> <span class="s">&#34;LM&#34;</span><span class="p">,</span> <span class="s">&#34;VV&#34;</span><span class="p">,</span> <span class="s">&#34;LL&#34;</span><span class="p">,</span> <span class="s">&#34;DD&#34;</span><span class="p">,</span>
        <span class="s">&#34;IIII&#34;</span><span class="p">,</span> <span class="s">&#34;XXXX&#34;</span><span class="p">,</span> <span class="s">&#34;CCCC&#34;</span><span class="p">,</span>
        <span class="s">&#34;MIM&#34;</span><span class="p">,</span> <span class="s">&#34;MVM&#34;</span><span class="p">,</span> <span class="s">&#34;MXM&#34;</span><span class="p">,</span> <span class="s">&#34;MLM&#34;</span><span class="p">,</span>        <span class="s">&#34;MDM&#34;</span><span class="p">,</span>
        <span class="s">&#34;DID&#34;</span><span class="p">,</span> <span class="s">&#34;DVD&#34;</span><span class="p">,</span> <span class="s">&#34;DXD&#34;</span><span class="p">,</span> <span class="s">&#34;DLD&#34;</span><span class="p">,</span> <span class="s">&#34;DCD&#34;</span><span class="p">,</span> <span class="s">&#34;DDD&#34;</span><span class="p">,</span> <span class="s">&#34;DMD&#34;</span><span class="p">,</span>
        <span class="s">&#34;CIC&#34;</span><span class="p">,</span> <span class="s">&#34;CVC&#34;</span><span class="p">,</span>        <span class="s">&#34;CLC&#34;</span><span class="p">,</span>        <span class="s">&#34;CDC&#34;</span><span class="p">,</span> <span class="s">&#34;CMC&#34;</span><span class="p">,</span>
        <span class="s">&#34;LIL&#34;</span><span class="p">,</span> <span class="s">&#34;LVL&#34;</span><span class="p">,</span> <span class="s">&#34;LXL&#34;</span><span class="p">,</span> <span class="s">&#34;LLL&#34;</span><span class="p">,</span> <span class="s">&#34;LCL&#34;</span><span class="p">,</span> <span class="s">&#34;LDL&#34;</span><span class="p">,</span> <span class="s">&#34;LML&#34;</span><span class="p">,</span>
                <span class="s">&#34;XVX&#34;</span><span class="p">,</span>        <span class="s">&#34;XLX&#34;</span><span class="p">,</span> <span class="s">&#34;XCX&#34;</span><span class="p">,</span> <span class="s">&#34;XDX&#34;</span><span class="p">,</span> <span class="s">&#34;XMX&#34;</span><span class="p">,</span>
        <span class="s">&#34;VIV&#34;</span><span class="p">,</span> <span class="s">&#34;VVV&#34;</span><span class="p">,</span> <span class="s">&#34;VXV&#34;</span><span class="p">,</span> <span class="s">&#34;VLV&#34;</span><span class="p">,</span> <span class="s">&#34;VCV&#34;</span><span class="p">,</span> <span class="s">&#34;VDV&#34;</span><span class="p">,</span> <span class="s">&#34;VMV&#34;</span><span class="p">,</span>
               <span class="s">&#34;IVI&#34;</span><span class="p">,</span> <span class="s">&#34;IXI&#34;</span><span class="p">,</span> <span class="s">&#34;ILI&#34;</span><span class="p">,</span> <span class="s">&#34;ICI&#34;</span><span class="p">,</span> <span class="s">&#34;IDI&#34;</span><span class="p">,</span> <span class="s">&#34;IMI&#34;</span><span class="p">};</span>

    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">_</span> <span class="p">:</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">value</span> <span class="p">:</span> <span class="n">values</span><span class="p">)</span> <span class="k">try</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fromRoman</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
            <span class="n">benchmark</span><span class="o">::</span><span class="n">DoNotOptimize</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(...)</span> <span class="p">{</span>
            <span class="c1">// silently ignore
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">BENCHMARK</span><span class="p">(</span><span class="n">fromRomanInproperValuesSet</span><span class="p">);</span>

<span class="n">BENCHMARK_MAIN</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="metodologia-pomiarów">Metodologia pomiarów</h3>
<p>Ostatecznym wynikiem na podstawie którego wyłoniłem zwycięskie rozwiązanie była suma czasów wszystkich scenariuszy. Można z tego wywnioskować, że najważniejszy był scenariusz poprawnej obsługi wszystkich liczb. Niepoprawnych konwersji było 68, a poprawnych 4001.</p>
<p>Każdą bibliotekę zaincludowałem w miejsce oznaczone komentarzem <code>// your include goes here</code>. Kod skompilowałem za pomocą zaklęcia:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">g++ PerformanceTests.cpp -std=c++17 -lbenchmark -lpthread -o benchmark_name -Wall -Wextra -pedantic -O3
</code></pre></td></tr></table>
</div>
</div><p>Kompilacja odbyła się na systemie macOS Catalina 10.15.4 kompilatorem Apple clang:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ziobron@MBP:~/$ uname -a
Darwin MBP 19.4.0 Darwin Kernel Version 19.4.0: Wed Mar  4 22:28:40 PST 2020; root:xnu-6153.101.6~15/RELEASE_X86_64 x86_64

ziobron@MBP:~/$ g++ --version
Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 (clang-1100.0.33.16)
Target: x86_64-apple-darwin19.4.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
</code></pre></td></tr></table>
</div>
</div><p>Oraz na Linuxie Ubuntu z kompilatorem g++ działającego w dockerze na ww systemie:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">root@cd653f15f1c5:/# uname -a
Linux cd653f15f1c5 4.19.76-linuxkit #1 SMP Thu Oct 17 19:31:58 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux

root@cd653f15f1c5:/# g++ --version
g++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0
Copyright (C) 2017 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre></td></tr></table>
</div>
</div><p>Informacje z Google benchmark</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Run on (8 X 1400 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 256 KiB (x4)
  L3 Unified 6144 KiB (x1)
</code></pre></td></tr></table>
</div>
</div><p>Odpalenie benchmarka</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./benchmark_name --benchmark_repetitions<span class="o">=</span><span class="m">10</span> --benchmark_report_aggregates_only<span class="o">=</span><span class="nb">true</span> --benchmark_out_format<span class="o">=</span>console --benchmark_out<span class="o">=</span>name.txt
</code></pre></td></tr></table>
</div>
</div><p>Każdy test powtarzany był 10 krotnie. Dbałem o to, aby Load factor (ogólny współczynnik obciążenia procesora) był zbliżony przy wszystkich testach.</p>
<h2 id="wyniki">WYNIKI</h2>
<p>Jednostki to ns. Wyciąłem je z tabeli w celu polepszenia przejrzystości.</p>
<h3 id="macos--apple-clang">MacOS + Apple Clang</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Benchmark</th>
<th style="text-align:right">(1) kk</th>
<th style="text-align:right">(6) mk</th>
<th style="text-align:right">(2) rk</th>
<th style="text-align:right">(3) bk</th>
<th style="text-align:right">(4) ap</th>
<th style="text-align:right">(5) jw</th>
<th style="text-align:right">(7) wb</th>
<th style="text-align:right">(8) wz</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">toRomanSingleNumber_mean</td>
<td style="text-align:right">36.8</td>
<td style="text-align:right">36.0</td>
<td style="text-align:right">30.1</td>
<td style="text-align:right">66.9</td>
<td style="text-align:right">21.6</td>
<td style="text-align:right">307.0</td>
<td style="text-align:right">80.6</td>
<td style="text-align:right">12649.0</td>
</tr>
<tr>
<td style="text-align:left">fromRomanSingleNumber_mean</td>
<td style="text-align:right">15.3</td>
<td style="text-align:right">15267.0</td>
<td style="text-align:right">50.3</td>
<td style="text-align:right">77.0</td>
<td style="text-align:right">922.0</td>
<td style="text-align:right">321.0</td>
<td style="text-align:right">27591.0</td>
<td style="text-align:right">26751.0</td>
</tr>
<tr>
<td style="text-align:left">toAndFromRomanWholeSet_mean</td>
<td style="text-align:right">536945.0</td>
<td style="text-align:right">76623753.0</td>
<td style="text-align:right">586206.0</td>
<td style="text-align:right">983589.0</td>
<td style="text-align:right">4110901.0</td>
<td style="text-align:right">5082754.0</td>
<td style="text-align:right">125607624.0</td>
<td style="text-align:right">182572943.0</td>
</tr>
<tr>
<td style="text-align:left">toRomanInproperValuesSet_mean</td>
<td style="text-align:right">7467.0</td>
<td style="text-align:right">10.6</td>
<td style="text-align:right">9082.0</td>
<td style="text-align:right">15.7</td>
<td style="text-align:right">17.3</td>
<td style="text-align:right">17.9</td>
<td style="text-align:right">85.5</td>
<td style="text-align:right">114492.0</td>
</tr>
<tr>
<td style="text-align:left">fromRomanInproperValuesSet_mean</td>
<td style="text-align:right">69132.0</td>
<td style="text-align:right">1508503.0</td>
<td style="text-align:right">90003.0</td>
<td style="text-align:right">4959.0</td>
<td style="text-align:right">56887.0</td>
<td style="text-align:right">13501.0</td>
<td style="text-align:right">3779486.0</td>
<td style="text-align:right">8003141.0</td>
</tr>
<tr>
<td style="text-align:left">SUM</td>
<td style="text-align:right">613596.1</td>
<td style="text-align:right">78147569.6</td>
<td style="text-align:right">685371.4</td>
<td style="text-align:right">988707.6</td>
<td style="text-align:right">4168748.9</td>
<td style="text-align:right">5096900.9</td>
<td style="text-align:right">129414867.1</td>
<td style="text-align:right">190729976.0</td>
</tr>
</tbody>
</table>
<h3 id="ubuntu-linux--g">Ubuntu Linux + g++</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Benchmark</th>
<th style="text-align:right">(1) kk</th>
<th style="text-align:right">(6) mk</th>
<th style="text-align:right">(2) rk</th>
<th style="text-align:right">(3) bk</th>
<th style="text-align:right">(5) ap</th>
<th style="text-align:right">(4) jw</th>
<th style="text-align:right">(7) wb</th>
<th style="text-align:right">(8) wz</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">toRomanSingleNumber_mean</td>
<td style="text-align:right">22.5</td>
<td style="text-align:right">60.3</td>
<td style="text-align:right">32.1</td>
<td style="text-align:right">99.8</td>
<td style="text-align:right">33.8</td>
<td style="text-align:right">90.0</td>
<td style="text-align:right">758.0</td>
<td style="text-align:right">196568.0</td>
</tr>
<tr>
<td style="text-align:left">fromRomanSingleNumber_mean</td>
<td style="text-align:right">16.6</td>
<td style="text-align:right">1116.0</td>
<td style="text-align:right">53.4</td>
<td style="text-align:right">241.0</td>
<td style="text-align:right">461.0</td>
<td style="text-align:right">107.0</td>
<td style="text-align:right">11755.0</td>
<td style="text-align:right">11562.0</td>
</tr>
<tr>
<td style="text-align:left">toAndFromRomanWholeSet_mean</td>
<td style="text-align:right">503402.0</td>
<td style="text-align:right">5679183.0</td>
<td style="text-align:right">885560.0</td>
<td style="text-align:right">1569131.0</td>
<td style="text-align:right">2355031.0</td>
<td style="text-align:right">1956939.0</td>
<td style="text-align:right">51080422.0</td>
<td style="text-align:right">836642820.0</td>
</tr>
<tr>
<td style="text-align:left">toRomanInproperValuesSet_mean</td>
<td style="text-align:right">17468.0</td>
<td style="text-align:right">258.0</td>
<td style="text-align:right">18929.0</td>
<td style="text-align:right">13.2</td>
<td style="text-align:right">27.6</td>
<td style="text-align:right">28.8</td>
<td style="text-align:right">869.0</td>
<td style="text-align:right">1846684.0</td>
</tr>
<tr>
<td style="text-align:left">fromRomanInproperValuesSet_mean</td>
<td style="text-align:right">185070.0</td>
<td style="text-align:right">296740.0</td>
<td style="text-align:right">135653.0</td>
<td style="text-align:right">13927.0</td>
<td style="text-align:right">28505.0</td>
<td style="text-align:right">3752.0</td>
<td style="text-align:right">864931.0</td>
<td style="text-align:right">1310478.0</td>
</tr>
<tr>
<td style="text-align:left">SUM</td>
<td style="text-align:right">705979.1</td>
<td style="text-align:right">5977357.3</td>
<td style="text-align:right">1040227.5</td>
<td style="text-align:right">1583412.0</td>
<td style="text-align:right">2384058.4</td>
<td style="text-align:right">1960916.8</td>
<td style="text-align:right">51958735.0</td>
<td style="text-align:right">840008112.0</td>
</tr>
</tbody>
</table>
<p>Nie zastosowałem kolejnych kryteriów oceny (punkty 4 i 5), które mówiły o jak najmniejszej liczbie ifów oraz pętli w kodzie.</p>
<h2 id="zwycięzcy">Zwycięzcy</h2>
<h3 id="zwycięskie-rozwiązanie---99-zniżki-na-kurs-c-online">Zwycięskie rozwiązanie - 99% zniżki na kurs C++ online</h3>
<h4 id="kacper-kaleta">Kacper Kaleta</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cm">/** Notes from roman number principles that I&#39;ve figured out:
</span><span class="cm">    _________________________________________________________________________________________________ General:
</span><span class="cm">    [rule 1] For these set: {M, D, C, L, X, V, I}
</span><span class="cm">        - Maximum value that can be built is 3999. (MMMCMXCIX)
</span><span class="cm">          Next value 4000 would need extra letter. (Mv) =&gt; (V = 5, v = 5000)
</span><span class="cm">        - Maximum length of the roman stringValue is 15.
</span><span class="cm">          (MMMDCCCLXXXVIII) = 3888
</span><span class="cm">
</span><span class="cm">    [rule 2] Numbers in the romanValue are arranged in the descending order.
</span><span class="cm">        The only exception is subtraction.
</span><span class="cm">        This allows to go through the ConversionList, going only forward.
</span><span class="cm">    _________________________________________________________________________________________________ Subtraction:
</span><span class="cm">    [rule 3] Cannot subtract by {500, 50, 5} =&gt; {D, L, V}.
</span><span class="cm">        - Examples: DM != 500, LC != 50
</span><span class="cm">
</span><span class="cm">    [rule 4]
</span><span class="cm">        - From X you can only subtract I, example: IX = 9       Wrong: VX != 5
</span><span class="cm">        - From C you can only subtract X, example: XC = 90      Wrong: IC != 99, Good: 99 = XCIX
</span><span class="cm">        - From M you can only subtract C, example: MCM = 1900   Wrong: XM != 990, Good: 990 = CMXC
</span><span class="cm">
</span><span class="cm">    [rule 5]
</span><span class="cm">        - After subtracting: IX, it will never appear: V
</span><span class="cm">        - After subtracting: XC, it will never appear: L
</span><span class="cm">        - After subtracting: CM, it will never appear: D
</span><span class="cm">    _________________________________________________________________________________________________ Letters Quantity:
</span><span class="cm">    [rule 6] There can never be more than ONE of {D, L, V}.
</span><span class="cm">        - Examples: DDD != 1500, LL != 100
</span><span class="cm">
</span><span class="cm">    [rule 7] There cannot be more than FOUR of {M, C, X}.
</span><span class="cm">        - Examples: XXXIX = 39, MMMCM = 3900
</span><span class="cm">
</span><span class="cm">    [rule 8] There cannot be more than three of {M, C, X} IN A ROW.
</span><span class="cm">    _________________________________________________________________________________________________ Other:
</span><span class="cm">    [9] Subtracting the same expression several times:
</span><span class="cm">        - Examples: MMIXIXIXIX or MMIVIVIVIV or XLXLVII
</span><span class="cm">
</span><span class="cm">    [10] Wrong value after subtraction, like IVI or ILI
</span><span class="cm">        - It&#39;s basically [rule 4] and [rule 5] violation
</span><span class="cm">
</span><span class="cm">    [11] Post Subrtation errors: {VIV, IVI, IXI}
</span><span class="cm">**/</span>
<span class="cp">#pragma once
</span><span class="cp"></span>
<span class="cp">#include</span><span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span><span class="cpf">&lt;forward_list&gt;</span><span class="cp">
</span><span class="cp"></span>

<span class="c1">//_____________________________________________________________________________________
</span><span class="c1"></span><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">forward_list</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">ConversionList</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ValueTooLow_Exception</span><span class="p">{};</span>
<span class="k">class</span> <span class="nc">ValueTooHigh_Exception</span><span class="p">{};</span>

<span class="k">class</span> <span class="nc">TooManyInRow_Exception</span><span class="p">{};</span>
<span class="k">class</span> <span class="nc">BadValue_Exception</span><span class="p">{};</span>

<span class="k">class</span> <span class="nc">BadSubtraction_Exception</span><span class="p">{};</span>
<span class="k">class</span> <span class="nc">BadValueAfterSubtraction_Exception</span><span class="p">{};</span>


<span class="c1">//_____________________________________________________________________________________
</span><span class="c1"></span><span class="n">ConversionList</span> <span class="n">conversionList</span> <span class="p">{</span>
    <span class="p">{</span><span class="sc">&#39;M&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;D&#39;</span><span class="p">,</span><span class="mi">500</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;C&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;L&#39;</span><span class="p">,</span><span class="mi">50</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;X&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;V&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;I&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">}</span>
<span class="p">};</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">c_maxInRow</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">c_minValue</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">c_maxValue</span> <span class="o">=</span> <span class="mi">3999</span><span class="p">;</span>


<span class="c1">//_____________________________________________________________________________________
</span><span class="c1"></span><span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span> <span class="n">GiveIteratorOnCharacter</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="p">,</span> <span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span><span class="p">);</span>

<span class="kt">bool</span> <span class="nf">CheckForFiveish</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>   <span class="c1">// if value == 5 or 50 or 500
</span><span class="c1"></span>

<span class="c1">//_____________________________________________________________________________________
</span><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">c_minValue</span><span class="p">)</span>
        <span class="k">throw</span> <span class="n">ValueTooLow_Exception</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">c_maxValue</span><span class="p">)</span>
        <span class="k">throw</span> <span class="n">ValueTooHigh_Exception</span><span class="p">();</span>

    <span class="k">auto</span> <span class="n">head</span> <span class="o">=</span> <span class="n">conversionList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">floatcalc</span><span class="p">;</span>    <span class="c1">// non-integer result of calculation
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">intcalc</span><span class="p">;</span>        <span class="c1">// integer result of calculation
</span><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>

    <span class="k">while</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="n">floatcalc</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">/</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span><span class="p">);</span>
        <span class="n">intcalc</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">floatcalc</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">floatcalc</span> <span class="o">&gt;=</span> <span class="mf">0.9f</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">CheckForFiveish</span><span class="p">((</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span><span class="p">)){</span>
                <span class="c1">// Subtraction: A =&gt; Works for NOT-fiveish scenerios: IX, XC, CM    {X, C, M}
</span><span class="c1"></span>                <span class="n">tail</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
                <span class="n">std</span><span class="o">::</span><span class="n">advance</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

                <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">tail</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
                <span class="n">value</span> <span class="o">-=</span> <span class="p">(</span><span class="o">*</span><span class="n">tail</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>

                <span class="o">++</span><span class="n">tail</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="n">tail</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
                <span class="o">++</span><span class="n">head</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">intcalc</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">){</span>
            <span class="c1">// Subtraction: B =&gt; Works for fiveish scenerios: IV, XL, CD    {V, L, D}
</span><span class="c1"></span>            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="n">tail</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
            <span class="n">value</span> <span class="o">-=</span> <span class="p">(</span><span class="o">*</span><span class="n">tail</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">intcalc</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">first</span><span class="p">);</span>
            <span class="n">value</span> <span class="o">-=</span> <span class="p">((</span><span class="o">*</span><span class="n">head</span><span class="p">).</span><span class="n">second</span> <span class="o">*</span> <span class="n">intcalc</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>



<span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">strLength</span> <span class="o">=</span> <span class="n">value</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">counter_theSame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lastFiveSeen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lastSubtraction</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">resultValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">indexValue</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">nextValue</span><span class="p">;</span>

    <span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span> <span class="n">clScope</span><span class="p">;</span>
    <span class="c1">//auto clScope = conversionList.begin();
</span><span class="c1"></span>    <span class="c1">// CLSCOPE - Narrows the scope of conversionList browsing
</span><span class="c1"></span>    <span class="c1">// *cl - Conversion List Scope
</span><span class="c1"></span>
    <span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span> <span class="n">scout</span><span class="p">;</span>
    <span class="c1">//auto scout = GiveIteratorOnCharacter(value[0], clScope);
</span><span class="c1"></span>    <span class="c1">// SCOUT - Goes ahead, checks what to do.
</span><span class="c1"></span>    <span class="c1">// Moves only between clScope and conversionList.end();
</span><span class="c1"></span>
    <span class="n">clScope</span> <span class="o">=</span> <span class="n">conversionList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">scout</span> <span class="o">=</span> <span class="n">GiveIteratorOnCharacter</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clScope</span><span class="p">);</span>
    <span class="n">indexValue</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">scout</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">CheckForFiveish</span><span class="p">(</span><span class="n">indexValue</span><span class="p">))</span>
        <span class="n">lastFiveSeen</span> <span class="o">=</span> <span class="n">indexValue</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">strLength</span><span class="p">;</span> <span class="o">++</span><span class="n">index</span><span class="p">){</span>
        <span class="n">scout</span> <span class="o">=</span> <span class="n">GiveIteratorOnCharacter</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">clScope</span><span class="p">);</span>
        <span class="n">nextValue</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">scout</span><span class="p">).</span><span class="n">second</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">nextValue</span> <span class="o">==</span> <span class="n">lastFiveSeen</span><span class="p">)</span>
            <span class="k">throw</span> <span class="n">TooManyInRow_Exception</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">indexValue</span> <span class="o">==</span> <span class="n">nextValue</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CheckForFiveish</span><span class="p">(</span><span class="n">nextValue</span><span class="p">))</span>
                <span class="k">throw</span> <span class="n">TooManyInRow_Exception</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">((</span><span class="n">counter_theSame</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">c_maxInRow</span><span class="p">)</span>    <span class="o">++</span><span class="n">counter_theSame</span><span class="p">;</span>
            <span class="k">else</span>                                    <span class="k">throw</span> <span class="n">TooManyInRow_Exception</span><span class="p">();</span> <span class="c1">// More than 3 equal letters in a row
</span><span class="c1"></span>
            <span class="n">clScope</span> <span class="o">=</span> <span class="n">scout</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="n">counter_theSame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Because nextValue is different from this one.
</span><span class="c1"></span>
            <span class="k">if</span> <span class="p">(</span><span class="n">indexValue</span> <span class="o">&lt;</span> <span class="n">nextValue</span><span class="p">){</span> <span class="c1">// Subtraction scenario:
</span><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">indexValue</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">nextValue</span> <span class="o">/</span> <span class="mi">10</span><span class="p">))</span>      <span class="c1">// [rule 4]
</span><span class="c1"></span>                    <span class="k">throw</span> <span class="n">BadSubtraction_Exception</span><span class="p">();</span>

                <span class="k">if</span><span class="p">(</span><span class="n">CheckForFiveish</span><span class="p">(</span><span class="n">indexValue</span><span class="p">))</span>
                    <span class="k">throw</span> <span class="n">BadSubtraction_Exception</span><span class="p">();</span>   <span class="c1">// [rule 3] Cannot subtract by {D, L, V}.
</span><span class="c1"></span>
                <span class="n">lastSubtraction</span> <span class="o">=</span> <span class="n">indexValue</span><span class="p">;</span>
                <span class="n">indexValue</span> <span class="o">=</span> <span class="o">-</span><span class="n">indexValue</span><span class="p">;</span>

                <span class="n">clScope</span> <span class="o">=</span> <span class="n">scout</span><span class="p">;</span>
                <span class="o">++</span><span class="n">clScope</span><span class="p">;</span>

                <span class="k">if</span><span class="p">(</span><span class="n">CheckForFiveish</span><span class="p">((</span><span class="o">*</span><span class="n">clScope</span><span class="p">).</span><span class="n">second</span><span class="p">))</span>  <span class="c1">// [rule 10] Post substraction errors
</span><span class="c1"></span>                    <span class="o">++</span><span class="n">clScope</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">nextValue</span> <span class="o">==</span> <span class="n">lastSubtraction</span><span class="p">)</span>      <span class="c1">// [rule 11] Post substraction errors
</span><span class="c1"></span>                <span class="k">throw</span> <span class="n">BadValueAfterSubtraction_Exception</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">resultValue</span> <span class="o">+=</span> <span class="n">indexValue</span><span class="p">;</span>
        <span class="n">indexValue</span> <span class="o">=</span> <span class="n">nextValue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">resultValue</span> <span class="o">+</span> <span class="n">indexValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">/// Searches the conversionList for given CHARACTER.
</span><span class="c1">/// Starts from ITER position to conversionList end().
</span><span class="c1"></span><span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span> <span class="n">GiveIteratorOnCharacter</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="n">ConversionList</span><span class="o">::</span><span class="n">iterator</span> <span class="n">iter</span><span class="p">){</span>
    <span class="k">while</span><span class="p">(</span><span class="n">iter</span> <span class="o">!=</span> <span class="n">conversionList</span><span class="p">.</span><span class="n">end</span><span class="p">()){</span>
        <span class="k">if</span> <span class="p">((</span><span class="o">*</span><span class="n">iter</span><span class="p">).</span><span class="n">first</span> <span class="o">==</span> <span class="n">character</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">iter</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="o">++</span><span class="n">iter</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Value is not within the given range of the ConversionList. (or it&#39;s not there at all)
</span><span class="c1"></span>    <span class="k">throw</span> <span class="nf">BadValue_Exception</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">CheckForFiveish</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>     <span class="c1">// V
</span><span class="c1"></span>        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">50</span><span class="p">)</span>    <span class="c1">// L
</span><span class="c1"></span>        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">500</span><span class="p">)</span>   <span class="c1">// D
</span><span class="c1"></span>        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Rozwiązanie zupełnie nietypowe, bo opiera się na pewnych własnościach odejmowania liczb rzymskich</li>
<li>Trudne do zrozumienie</li>
<li>Mało czytelne, ale to nie było wyzwanie czystego kodu ;)</li>
<li>Są wyjątki do obsługi błędów</li>
<li><code>fromRoman()</code> może przyjmować stringa przez <code>const &amp;</code></li>
<li>zamiast <code>std::forward_list</code> można użyć <code>std::array</code></li>
</ul>
</div>
        </div>
    </div>
<h3 id="wyróżnione-rozwiązania---50-zniżki-na-kurs-c-online">Wyróżnione rozwiązania - 50% zniżki na kurs C++ online</h3>
<h4 id="robert-kumanek">Robert Kumanek</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// https://github.com/Rosein/converter_roman_arabic
</span><span class="c1"></span>
<span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdexcept&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">roman</span> <span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span> <span class="kt">int</span> <span class="n">arabic</span> <span class="p">);</span>
<span class="kt">int</span> <span class="nf">extractFromRomanDigit</span><span class="p">(</span> <span class="kt">char</span> <span class="n">romanDigit</span> <span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">extractRomanFromNthDigit</span> <span class="p">{</span>
   <span class="p">{</span> <span class="p">{</span> <span class="s">&#34;&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;I&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;II&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;III&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;IV&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;V&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;VI&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;VII&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;VIII&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;IX&#34;</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span> <span class="p">{</span> <span class="s">&#34;&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;X&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;XX&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;XXX&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;XL&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;L&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;LX&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;LXX&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;LXXX&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;XC&#34;</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span> <span class="p">{</span> <span class="s">&#34;&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;C&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;CC&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;CCC&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;CD&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;D&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;DC&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;DCC&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;DCCC&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;CM&#34;</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span> <span class="p">{</span> <span class="s">&#34;&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;M&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;MM&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#34;MMM&#34;</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">MAX_ROMAN_NUMERAL</span> <span class="p">{</span> <span class="mi">3999</span> <span class="p">};</span>
<span class="k">constexpr</span> <span class="kt">int</span> <span class="n">MIN_ROMAN_NUMERAL</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span> <span class="kt">int</span> <span class="n">arabic</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">arabic</span> <span class="o">&gt;</span> <span class="n">MAX_ROMAN_NUMERAL</span> <span class="o">||</span> <span class="n">MIN_ROMAN_NUMERAL</span> <span class="o">&gt;</span> <span class="n">arabic</span> <span class="p">)</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">logic_error</span><span class="p">(</span> <span class="s">&#34;Invalid input&#34;</span> <span class="p">);</span>
    <span class="k">return</span>  <span class="n">extractRomanFromNthDigit</span> <span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="p">[</span> <span class="n">arabic</span>        <span class="o">/</span> <span class="mi">1000</span> <span class="p">]</span> <span class="o">+</span>
            <span class="n">extractRomanFromNthDigit</span> <span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="p">[</span> <span class="n">arabic</span> <span class="o">%</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">100</span>  <span class="p">]</span> <span class="o">+</span>
            <span class="n">extractRomanFromNthDigit</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">[</span> <span class="n">arabic</span> <span class="o">%</span> <span class="mi">100</span>  <span class="o">/</span> <span class="mi">10</span>   <span class="p">]</span> <span class="o">+</span>
            <span class="n">extractRomanFromNthDigit</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">[</span> <span class="n">arabic</span> <span class="o">%</span> <span class="mi">10</span>          <span class="p">];</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">extractFromRomanDigit</span><span class="p">(</span> <span class="kt">char</span> <span class="n">romanDigit</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span> <span class="n">romanDigit</span> <span class="p">)</span>
  <span class="p">{</span>
    <span class="k">case</span> <span class="sc">&#39;M&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;D&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">500</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;C&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;L&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">50</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;X&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;V&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">&#39;I&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">logic_error</span><span class="p">(</span> <span class="s">&#34;Invalid input&#34;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">roman</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">arabic</span> <span class="p">{};</span>
    <span class="kt">int</span> <span class="n">cur</span> <span class="p">{};</span>

    <span class="k">for</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">roman_size</span> <span class="o">=</span> <span class="n">roman</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">roman_size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">extractFromRomanDigit</span><span class="p">(</span> <span class="n">roman</span> <span class="p">[</span> <span class="n">i</span> <span class="p">]</span> <span class="p">);</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">roman_size</span> <span class="p">)</span>
            <span class="n">arabic</span> <span class="o">+=</span> <span class="p">(</span> <span class="n">cur</span> <span class="o">&gt;=</span> <span class="n">extractFromRomanDigit</span><span class="p">(</span> <span class="n">roman</span> <span class="p">[</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nl">cur</span> <span class="p">:</span> <span class="o">-</span><span class="n">cur</span> <span class="p">);</span>
        <span class="k">else</span>
            <span class="n">arabic</span> <span class="o">+=</span> <span class="n">cur</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span> <span class="n">roman</span> <span class="o">!=</span> <span class="n">toRoman</span><span class="p">(</span> <span class="n">arabic</span> <span class="p">)</span> <span class="o">||</span> <span class="n">roman</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">logic_error</span><span class="p">(</span> <span class="s">&#34;Invalidate input&#34;</span> <span class="p">);</span>

    <span class="k">return</span> <span class="n">arabic</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Numer 2 pod względem szybkości działania</li>
<li>Są wyjątki do obsługi błędów</li>
<li>Bardzo czytelne, czysty kod ;)</li>
<li>Brak strażnika nagłówka</li>
<li>Używa LUT (LookUp Table) - stała złożoność</li>
<li>Sprawdzanie poprawości <code>fromRoman()</code> za pomocą <code>toRoman()</code></li>
<li><code>fromRoman()</code> może przyjmować stringa przez <code>const &amp;</code></li>
</ul>
</div>
        </div>
    </div>
<h4 id="bartek-kurosz">Bartek Kurosz</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef WYZWANIE_WYDAJNEGO_KODU_ROMAN_ARAB_CONVERTER_H
</span><span class="cp">#define WYZWANIE_WYDAJNEGO_KODU_ROMAN_ARAB_CONVERTER_H
</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string_view&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;cstdint&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">using</span> <span class="n">Int</span> <span class="o">=</span> <span class="kt">int_fast16_t</span><span class="p">;</span>

<span class="c1">// to Roman
</span><span class="c1"></span><span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">Int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">basicTokens</span><span class="p">{</span>
        <span class="p">{</span><span class="mi">1</span><span class="p">,</span>    <span class="s">&#34;I&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">5</span><span class="p">,</span>    <span class="s">&#34;V&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">10</span><span class="p">,</span>   <span class="s">&#34;X&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">50</span><span class="p">,</span>   <span class="s">&#34;L&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">100</span><span class="p">,</span>  <span class="s">&#34;C&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">500</span><span class="p">,</span>  <span class="s">&#34;D&#34;</span><span class="p">},</span>
        <span class="p">{</span><span class="mi">1000</span><span class="p">,</span> <span class="s">&#34;M&#34;</span><span class="p">},</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">two</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">token</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">token</span> <span class="o">+</span> <span class="n">token</span><span class="p">;</span> <span class="p">}</span>

<span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">three</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">token</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">token</span> <span class="o">+</span> <span class="n">token</span> <span class="o">+</span> <span class="n">token</span><span class="p">;</span> <span class="p">}</span>

<span class="kr">inline</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">Int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">Int</span><span class="p">)</span><span class="o">&gt;&gt;</span> <span class="n">digitToToken</span><span class="p">{</span>
        <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">];</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">two</span><span class="p">(</span><span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]);</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">three</span><span class="p">(</span><span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]);</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]</span> <span class="o">+</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">5</span><span class="p">];</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">5</span><span class="p">];</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">];</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">two</span><span class="p">(</span><span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]);</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">8</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">three</span><span class="p">(</span><span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]);</span> <span class="p">}},</span>
        <span class="p">{</span><span class="mi">9</span><span class="p">,</span> <span class="p">[](</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span><span class="p">]</span> <span class="o">+</span> <span class="n">basicTokens</span><span class="p">[</span><span class="n">multiplier</span> <span class="o">*</span> <span class="mi">10</span><span class="p">];</span> <span class="p">}}</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="k">constexpr</span> <span class="n">Int</span> <span class="nf">determineMaxMultiplier</span><span class="p">(</span><span class="n">Int</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">input</span> <span class="o">&gt;=</span> <span class="mi">1000</span> <span class="o">?</span> <span class="mi">1000</span> <span class="o">:</span> <span class="p">(</span><span class="n">input</span> <span class="o">&gt;=</span> <span class="mi">100</span> <span class="o">?</span> <span class="mi">100</span> <span class="o">:</span> <span class="p">(</span><span class="n">input</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="o">?</span> <span class="mi">10</span> <span class="o">:</span> <span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="kr">inline</span> <span class="k">constexpr</span> <span class="n">Int</span> <span class="nf">extractNumber</span><span class="p">(</span><span class="n">Int</span> <span class="n">input</span><span class="p">,</span> <span class="n">Int</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">input</span> <span class="o">-</span> <span class="p">(</span><span class="n">input</span> <span class="o">%</span> <span class="n">multiplier</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">translateDigitToToken</span><span class="p">(</span><span class="n">Int</span> <span class="n">number</span><span class="p">,</span> <span class="n">Int</span> <span class="n">multiplier</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">digitToToken</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="n">number</span> <span class="o">/</span> <span class="n">multiplier</span><span class="p">)(</span><span class="n">multiplier</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">inline</span> <span class="k">constexpr</span> <span class="kt">int</span> <span class="n">minRomanNumber</span><span class="p">{</span><span class="mi">1</span><span class="p">};</span>
<span class="kr">inline</span> <span class="k">constexpr</span> <span class="kt">int</span> <span class="n">maxRomanNumber</span><span class="p">{</span><span class="mi">3999</span><span class="p">};</span>

<span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">in</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">in</span> <span class="o">&lt;</span> <span class="n">minRomanNumber</span> <span class="n">or</span> <span class="n">in</span> <span class="o">&gt;</span> <span class="n">maxRomanNumber</span><span class="p">)</span> <span class="k">return</span> <span class="p">{};</span>
    <span class="k">auto</span> <span class="n">input</span><span class="p">{</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">in</span><span class="p">)};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span><span class="p">{};</span>
    <span class="n">Int</span> <span class="n">maxMultiplier</span><span class="p">{</span><span class="n">determineMaxMultiplier</span><span class="p">(</span><span class="n">input</span><span class="p">)};</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">multiplier</span><span class="p">{</span><span class="n">maxMultiplier</span><span class="p">};</span> <span class="n">input</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">multiplier</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">auto</span> <span class="n">number</span><span class="p">{</span><span class="n">extractNumber</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">)};</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">translateDigitToToken</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">);</span>
            <span class="n">input</span> <span class="o">-=</span> <span class="n">number</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// from Roman
</span><span class="c1"></span><span class="k">struct</span> <span class="nc">Token</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">text</span><span class="p">;</span>
    <span class="n">Int</span> <span class="n">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">using</span> <span class="n">Tokens</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">const</span> <span class="kr">inline</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">Tokens</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">translationTable</span><span class="p">{</span>
        <span class="n">Tokens</span><span class="p">{</span>
                <span class="p">{</span><span class="s">&#34;MMM&#34;</span><span class="p">,</span> <span class="mi">3000</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;MM&#34;</span><span class="p">,</span>  <span class="mi">2000</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;M&#34;</span><span class="p">,</span>   <span class="mi">1000</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="n">Tokens</span><span class="p">{</span>
                <span class="p">{</span><span class="s">&#34;CM&#34;</span><span class="p">,</span>   <span class="mi">900</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;DCCC&#34;</span><span class="p">,</span> <span class="mi">800</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;DCC&#34;</span><span class="p">,</span>  <span class="mi">700</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;DC&#34;</span><span class="p">,</span>   <span class="mi">600</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;D&#34;</span><span class="p">,</span>    <span class="mi">500</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;CD&#34;</span><span class="p">,</span>   <span class="mi">400</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;CCC&#34;</span><span class="p">,</span>  <span class="mi">300</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;CC&#34;</span><span class="p">,</span>   <span class="mi">200</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;C&#34;</span><span class="p">,</span>    <span class="mi">100</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="n">Tokens</span><span class="p">{</span>
                <span class="p">{</span><span class="s">&#34;XC&#34;</span><span class="p">,</span>   <span class="mi">90</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;LXXX&#34;</span><span class="p">,</span> <span class="mi">80</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;LXX&#34;</span><span class="p">,</span>  <span class="mi">70</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;LX&#34;</span><span class="p">,</span>   <span class="mi">60</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;L&#34;</span><span class="p">,</span>    <span class="mi">50</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;XL&#34;</span><span class="p">,</span>   <span class="mi">40</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;XXX&#34;</span><span class="p">,</span>  <span class="mi">30</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;XX&#34;</span><span class="p">,</span>   <span class="mi">20</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;X&#34;</span><span class="p">,</span>    <span class="mi">10</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="n">Tokens</span><span class="p">{</span>
                <span class="p">{</span><span class="s">&#34;IX&#34;</span><span class="p">,</span>   <span class="mi">9</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;VIII&#34;</span><span class="p">,</span> <span class="mi">8</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;VII&#34;</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;VI&#34;</span><span class="p">,</span>   <span class="mi">6</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;V&#34;</span><span class="p">,</span>    <span class="mi">5</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;IV&#34;</span><span class="p">,</span>   <span class="mi">4</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;III&#34;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;II&#34;</span><span class="p">,</span>   <span class="mi">2</span><span class="p">},</span>
                <span class="p">{</span><span class="s">&#34;I&#34;</span><span class="p">,</span>    <span class="mi">1</span><span class="p">}</span>
        <span class="p">}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="nc">string_view_extended</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">data</span><span class="p">;</span>

    <span class="na">[[nodiscard]]</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">startsWith</span><span class="p">(</span><span class="k">const</span> <span class="n">Token</span> <span class="n">token</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">token</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="o">==</span> <span class="n">token</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">constexpr</span> <span class="kt">void</span> <span class="nf">cutFromFront</span><span class="p">(</span><span class="k">const</span> <span class="n">Token</span> <span class="n">token</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">data</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="na">[[nodiscard]]</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">empty</span><span class="p">()</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">longestRomanNumber</span><span class="p">{</span><span class="s">&#34;MMMDCCCLXXXVIII&#34;</span><span class="p">};</span>
<span class="kr">inline</span> <span class="k">constexpr</span> <span class="kt">int</span> <span class="n">ERROR_WRONG_INPUT</span><span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>

<span class="kr">inline</span> <span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">in</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">in</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">in</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">longestRomanNumber</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="n">ERROR_WRONG_INPUT</span><span class="p">;</span>

    <span class="n">string_view_extended</span> <span class="n">input</span><span class="p">{</span><span class="n">in</span><span class="p">};</span>
    <span class="n">Int</span> <span class="n">result</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="nl">tokens</span> <span class="p">:</span> <span class="n">translationTable</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="nl">token</span> <span class="p">:</span> <span class="n">tokens</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">startsWith</span><span class="p">(</span><span class="n">token</span><span class="p">))</span> <span class="p">{</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">token</span><span class="p">.</span><span class="n">number</span><span class="p">;</span>
                <span class="n">input</span><span class="p">.</span><span class="n">cutFromFront</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">input</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">:</span> <span class="n">ERROR_WRONG_INPUT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="c1">//WYZWANIE_WYDAJNEGO_KODU_ROMAN_ARAB_CONVERTER_H
</span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Brak <code>#include &lt;array&gt;</code></li>
<li>Numer 3 pod względem szybkości działania</li>
<li>Używa inline variables z C++17</li>
<li>Używa <code>constexpr</code></li>
<li>Używa LUT (LookUp Table) - liniowa stała</li>
<li>Brak strażnika nagłówka</li>
<li><code>fromRoman()</code> przyjmuje napis przez <code>std::string_view</code></li>
</ul>
</div>
        </div>
    </div>
<h4 id="aleksandra-postawka">Aleksandra Postawka</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef __roman_arab__
</span><span class="cp">#define __roman_arab__
</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tabNum</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span> <span class="p">};</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">tabRom</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="sc">&#39;D&#39;</span><span class="p">,</span> <span class="sc">&#39;C&#39;</span><span class="p">,</span> <span class="sc">&#39;L&#39;</span><span class="p">,</span> <span class="sc">&#39;X&#39;</span><span class="p">,</span> <span class="sc">&#39;V&#39;</span><span class="p">,</span> <span class="sc">&#39;I&#39;</span> <span class="p">};</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">auxTabNum</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4000</span> <span class="p">};</span>
<span class="k">const</span> <span class="n">string</span> <span class="n">auxTabRom</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#34;CM&#34;</span><span class="p">,</span> <span class="s">&#34;CD&#34;</span><span class="p">,</span> <span class="s">&#34;XC&#34;</span><span class="p">,</span> <span class="s">&#34;XL&#34;</span><span class="p">,</span> <span class="s">&#34;IX&#34;</span><span class="p">,</span> <span class="s">&#34;IV&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span> <span class="p">};</span>



<span class="c1">//for incorrect input the empty string is returned
</span><span class="c1"></span><span class="n">string</span> <span class="nf">toRoman</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>


    <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">3999</span><span class="p">)</span><span class="c1">//Roman NaN
</span><span class="c1"></span>        <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">num</span> <span class="o">&gt;=</span> <span class="n">tabNum</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">num</span> <span class="o">-=</span> <span class="n">tabNum</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tabRom</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">&gt;=</span> <span class="n">auxTabNum</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">num</span> <span class="o">-=</span> <span class="n">auxTabNum</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">auxTabRom</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="c1">//i += 1;
</span><span class="c1"></span>        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">checkCorrectness_1</span><span class="p">(</span><span class="n">string</span> <span class="n">txt</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">act</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">txt</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">txt</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">txt</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;M&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;C&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;X&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;I&#39;</span> <span class="o">&amp;&amp;</span>
            <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;D&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;L&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">act</span> <span class="o">!=</span> <span class="sc">&#39;V&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// incorrect input is signalized by -1
</span><span class="c1"></span><span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span><span class="n">string</span> <span class="n">txt</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">digit</span><span class="p">,</span> <span class="n">prevDigit</span><span class="p">,</span> <span class="n">maxDigit</span><span class="p">,</span> <span class="n">maxIndex</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">romToArabTab</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;M&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;D&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;L&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;X&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;V&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="n">romToArabTab</span><span class="p">[</span><span class="sc">&#39;I&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">//check characters
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">checkCorrectness_1</span><span class="p">(</span><span class="n">txt</span><span class="p">))</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">//Roman NaN
</span><span class="c1"></span>
    <span class="n">maxIndex</span> <span class="o">=</span> <span class="n">txt</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">maxDigit</span> <span class="o">=</span> <span class="n">romToArabTab</span><span class="p">[</span><span class="n">txt</span><span class="p">[</span><span class="n">maxIndex</span><span class="p">]];</span>

    <span class="n">num</span> <span class="o">=</span> <span class="n">maxDigit</span><span class="p">;</span>
    <span class="n">prevDigit</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">maxIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">romToArabTab</span><span class="p">[</span><span class="n">txt</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">digit</span> <span class="o">&lt;</span> <span class="n">maxDigit</span><span class="p">)</span>
            <span class="n">num</span> <span class="o">-=</span> <span class="n">digit</span><span class="p">;</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">num</span> <span class="o">+=</span> <span class="n">digit</span><span class="p">;</span>
            <span class="n">maxDigit</span> <span class="o">=</span> <span class="n">digit</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">prevDigit</span> <span class="o">=</span> <span class="n">digit</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//check syntax
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">3999</span> <span class="o">||</span> <span class="n">txt</span> <span class="o">!=</span> <span class="n">toRoman</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>



<span class="cp">#endif
</span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Numer 4 (macOS) i 5 (Linux) pod względem szybkości działania</li>
<li>Używa kodów powrotu</li>
<li><code>string</code> można było przekazywać przez <code>const &amp;</code></li>
<li><code>std::map</code> można zainicjalizować przy stworzeniu i zrobić statyczną</li>
</ul>
</div>
        </div>
    </div>
<h4 id="jakub-wińczuk">Jakub Wińczuk</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cm">/* returns empty string if got wrong input value */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">number</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">4000</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">roman</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">add_middle</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">characters</span> <span class="o">=</span> <span class="s">&#34;IVXLCDMMM&#34;</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">characters</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="k">while</span><span class="p">(</span><span class="n">number</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">){</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span><span class="n">temp</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">){</span>
                <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
                <span class="o">--</span><span class="n">temp</span><span class="p">;</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">){</span>
                <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
                <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="mi">9</span><span class="p">){</span>
                <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
                <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">){</span>
                <span class="n">add_middle</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">temp</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span>
            <span class="p">}</span>   
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">add_middle</span><span class="p">){</span>
           <span class="n">roman</span> <span class="o">=</span> <span class="n">characters</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">roman</span><span class="p">;</span>
           <span class="n">add_middle</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">number</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">roman</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* returns 0 if got wrong input value */</span>
<span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">roman</span><span class="p">){</span>

    <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">add</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">roman</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">){</span>
        
        <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;I&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;V&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;X&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;L&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;C&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;D&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">roman</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;M&#39;</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
      
        <span class="k">if</span><span class="p">(</span><span class="n">last</span> <span class="o">&gt;</span> <span class="n">add</span><span class="p">)</span>
            <span class="n">add</span> <span class="o">=</span> <span class="o">-</span><span class="n">add</span><span class="p">;</span>

        <span class="n">value</span> <span class="o">+=</span> <span class="n">add</span><span class="p">;</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">add</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">toRoman</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="n">roman</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Numer 5 (macOS) i 4 (Linux) pod względem szybkości działania</li>
<li>Używa kodów powrotu</li>
<li>Brak strażnika nagłówka</li>
<li><code>string</code> jest przekazywany przez <code>const &amp;</code></li>
<li>Są drabinki <code>else if</code>, można zamienić na mapę</li>
</ul>
</div>
        </div>
    </div>
<h4 id="marcin-komorek">Marcin Komorek</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;regex&gt;</span><span class="cp">
</span><span class="cp"></span><span class="cm">/*************************************************************
</span><span class="cm">    The library provides conversions in the range of 1-3999
</span><span class="cm"> ************************************************************/</span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;&gt;</span> <span class="n">romanVector</span>
<span class="p">{</span>
    <span class="p">{</span><span class="mi">1000</span><span class="p">,</span> <span class="s">&#34;M&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">900</span><span class="p">,</span><span class="s">&#34;CM&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">500</span><span class="p">,</span><span class="s">&#34;D&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">400</span><span class="p">,</span> <span class="s">&#34;CD&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">100</span><span class="p">,</span> <span class="s">&#34;C&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">90</span><span class="p">,</span> <span class="s">&#34;XC&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">50</span><span class="p">,</span> <span class="s">&#34;L&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">40</span><span class="p">,</span> <span class="s">&#34;XL&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="s">&#34;X&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">9</span><span class="p">,</span> <span class="s">&#34;IX&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#34;V&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#34;IV&#34;</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;I&#34;</span><span class="p">}</span>
<span class="p">};</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">toRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#34;non-positive number!&#34;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">3999</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#34;to large value!&#34;</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">result</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="k">const</span> <span class="o">&amp;</span><span class="nl">pair</span> <span class="p">:</span> <span class="n">romanVector</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
            <span class="n">value</span> <span class="o">-=</span> <span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">regex</span> <span class="n">romanNumerals</span><span class="p">(</span><span class="s">&#34;^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$&#34;</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">checkRomanInput</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">smatch</span> <span class="n">matchingBehavior</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">regex_search</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">matchingBehavior</span><span class="p">,</span> <span class="n">romanNumerals</span><span class="p">)))</span>
        <span class="k">throw</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">romanMap</span> 
<span class="p">{</span>
    <span class="p">{</span><span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;D&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;C&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;L&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;X&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;V&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">},</span>
    <span class="p">{</span><span class="sc">&#39;I&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">fromRoman</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">checkRomanInput</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">value</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">romanMap</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">romanMap</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>
            <span class="n">result</span> <span class="o">-=</span> <span class="n">romanMap</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
        <span class="k">else</span>   
            <span class="n">result</span> <span class="o">+=</span> <span class="n">romanMap</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
    <span class="p">}</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">romanMap</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">value</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]];</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Moje komentarze<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Numer 6 pod względem szybkości działania</li>
<li>Używa kodów powrotu</li>
<li>Brak strażnika nagłówka</li>
<li><code>std::vector&lt;std::pair&lt;const unsigned int, const char*&gt;&gt;</code> można zmienić na <code>std::array&lt;std::pair&lt;const unsigned int, const char*&gt;&gt;</code></li>
<li><code>string</code> jest przekazywany przez <code>const &amp;</code></li>
<li>Jest użyty regex do sprawdzania poprawności</li>
<li>Wyjątki są łapane w funkcji <code>fromRoman()</code>, lepiej gdyby mogły wylecieć poza funkcję</li>
</ul>
</div>
        </div>
    </div>
<h3 id="pozostali-finaliści---10-zniżki-na-kurs-c-online">Pozostali finaliści - 10% zniżki na kurs C++ online</h3>
<ul>
<li>Wiola B.</li>
<li>Wiktor Z.</li>
</ul>
<p>Wszystkim bardzo dziękuję za udział w wyzwaniu, a zwycięzcom serdecznie gratuluję!</p>
<h2 id="wnioski">Wnioski</h2>
<ol>
<li>Dokładnie czytaj opis zadania</li>
<li>Dokładnie testuj swoje rozwiązanie</li>
</ol>
<p>Jeśli uczestniczyliście kiedyś w rekrutacji, gdzie pierwszym etapem jest napisanie kawałka kodu, który później ma być sprawdzany automatycznie to większość rozwiązań odpada właśnie z tych 2 powodów. Aby dowieść poprawności działania kodu powinien on mieć testy jednostkowe.</p>
<h2 id="sprzedaż-kursu-c-online">Sprzedaż kursu C++ online</h2>
<p>Przy okazji omówienia tego wyzwania otwieram sprzedaż kursu C++ online. Osoby, które wygrały zniżki dostaną maile z odpowiednimi linkami ze zniżkami najpóźniej 25.04.
Sprzedaż trwa tylko do czwartku 30 kwietnia 2020 i są 32 miejsca w cenie 1295 PLN.
Moim założeniem było, aby zebrać 64 osoby, a trochę osób już zapisało się w przedsprzedaży, więc tylko tyle nam zostało do okrągłych 64 :)
Po wykorzystaniu limitu zastrzegam sobie prawo do zwiększenia liczby miejsc oraz ceny kursu.</p>
<hr>
<p>Na koniec mam małą prośbę. Powiedz mi, czy lubisz te wyzwania i czy chcesz, aby były one organizowane cyklicznie. Napisz mi to w komentarzu poniżej lub w mailu.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Artykuł ostatnio zaktualizowany 2020-04-29&nbsp;<a class="git-hash" href="https://github.com/coders-school/site/commit/668f80d28915937a246540b1d989c859c8fead0c" target="_blank" title="commit by Łukasz Ziobroń(lukasz@coders.school) 668f80d28915937a246540b1d989c859c8fead0c: Content modification to match to the new theme settings">
                                <i class="fas fa-hashtag fa-fw"></i>668f80d</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/post/wyniki-wyzwania-wydajnego-kodu/index.md" target="_blank">Zobacz Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Udostępnij na Twitter" data-sharer="twitter" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" data-title="Wyniki wyzwania wydajnego kodu" data-hashtags="c&#43;&#43;,wyzwanie,wydajny kod,challenge,online"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na Facebook" data-sharer="facebook" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" data-hashtag="c&#43;&#43;"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na Linkedin" data-sharer="linkedin" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na WhatsApp" data-sharer="whatsapp" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" data-title="Wyniki wyzwania wydajnego kodu" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na Hacker News" data-sharer="hackernews" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" data-title="Wyniki wyzwania wydajnego kodu"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na Reddit" data-sharer="reddit" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="Udostępnij na Evernote" data-sharer="evernote" data-url="https://coders.school/post/wyniki-wyzwania-wydajnego-kodu/" data-title="Wyniki wyzwania wydajnego kodu"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=""></a>,&nbsp;<a href="/tags/wyzwanie/">wyzwanie</a>,&nbsp;<a href="/tags/wydajny-kod/">wydajny kod</a>,&nbsp;<a href="/tags/challenge/">challenge</a>,&nbsp;<a href="/tags/online/">online</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Wstecz</a></span>&nbsp;|&nbsp;<span><a href="/">Strona główna</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/post/emoji-w-kodzie/" class="prev" rel="prev" title="Emoji w kodzie &#43; porady dla początkujących programistów"><i class="fas fa-angle-left fa-fw"></i>Emoji w kodzie &#43; porady dla początkujących programistów</a>
            <a href="/post/sprzedaz-kursu-online-zakonczona/" class="next" rel="next" title="Sprzedaż kursu C&#43;&#43; online zakonczona">Sprzedaż kursu C&#43;&#43; online zakonczona<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="newsletter" id="newsletter">
    <h4 class="newsletter-title">Pobierz materiały do nauki C++17</h4>
    <div class="newsletter-form">
        <div class="ml-form-embed"
             data-account="1867098:a0j3g0e1f2"
             data-form="1756746:o5h8s2">
        </div>
    </div>
    <div class="newsletter-info">Zapisz się na newsletter i <strong>otrzymaj materiały do nauki nowoczesnego C++</strong>. Co jakiś czas przesyłam też darmowe fragmenty lekcji lub webinarów, dzięki którym C++ nie będzie aż taki trudny.<br>Zapoznaj się z naszą <a href="/polityka-prywatnosci">polityką prywatności</a>.</div>
</div><div class="footer-line">Napędzany przez <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.76.5">Hugo</a> | Szablon - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.6"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2017 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="o-nas/#trenerzy" target="_blank">Łukasz Ziobroń</a></span>&nbsp;|&nbsp;<span class="license"><a rel="privacy internal" href="/polityka-prywatnosci/" target="_blank">Polityka prywatności</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Powrót do góry">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Zobacz komentarze">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript">
    window.config = {"code":{"copyTitle":"Skopiuj do schowka","maxShownLines":10},"comment":{},"headerMode":{"desktop":"fixed","mobile":"auto"}};
</script><script type="text/javascript" src="https://polyfill.io/v3/polyfill.min.js?features=html5shiv%2CElement.prototype.closest%2CrequestAnimationFrame%2CCustomEvent%2CPromise%2CObject.entries%2CObject.assign%2CObject.values%2Cfetch%2CElement.prototype.after%2CArray.prototype.fill%2CIntersectionObserver%2CArray.from%2CArray.prototype.find%2CMath.sign"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/object-fit-images/ofi.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
